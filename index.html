<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í†µí•©ê³¼í•™ í€´ì¦ˆ í”„ë¡œê·¸ë¨</title>
    <style>
        /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background-color: #f4f7f9;
            color: #333;
            padding: 20px;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #007bff;
            border-bottom: 3px solid #007bff;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        .question-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #f9f9f9;
        }
        .question-section h2 {
            margin-top: 0;
            color: #333;
        }
        .question-box {
            margin-bottom: 15px;
            padding: 15px;
            border: 1px solid #eee;
            border-radius: 6px;
            background-color: #fff;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input[type="text"] {
            width: calc(100% - 20px);
            padding: 10px;
            margin-top: 5px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .answer-button {
            padding: 8px 15px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-right: 10px;
        }
        .answer-button:hover {
            background-color: #218838;
        }
        .check-button {
            background-color: #ffc107;
            color: #333;
        }
        .check-button:hover {
            background-color: #e0a800;
        }
        .reset-button {
            background-color: #dc3545;
        }
        .reset-button:hover {
            background-color: #c82333;
        }
        .result {
            font-weight: bold;
            padding: 5px 0;
            margin-top: 5px;
        }
        .correct {
            color: #28a745;
        }
        .incorrect {
            color: #dc3545;
        }
        .short-answer-input {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            margin-bottom: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        /* ì„œìˆ í˜• ìŠ¤íƒ€ì¼ */
        .essay-answer-box {
            display: none; /* ì´ˆê¸°ì—ëŠ” ì •ë‹µ ìˆ¨ê¹€ */
            margin-top: 15px;
            padding: 15px;
            border-top: 2px dashed #007bff;
            background-color: #e9f7ff;
            border-radius: 6px;
        }
        .essay-answer-box h4 {
            color: #007bff;
            margin-top: 0;
        }
        .essay-answer-item {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }
        .essay-answer-item input[type="checkbox"] {
            margin-right: 10px;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        .essay-answer-item span {
            flex-grow: 1;
        }
        #essay-score-display {
            font-size: 1.2em;
            margin-top: 20px;
            font-weight: bold;
            color: #333;
        }
        .final-score {
            font-size: 1.5em;
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            border: 2px solid #007bff;
            border-radius: 8px;
            background-color: #e9f7ff;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ“š í†µí•©ê³¼í•™ í€´ì¦ˆ</h1>

    <div id="quiz-container">
        </div>

    <div class="final-score" id="final-score-display" style="display: none;"></div>

    <button class="answer-button check-button" onclick="checkShortAnswers()">ë‹¨ë‹µí˜• ì •ë‹µ í™•ì¸</button>
    <button class="answer-button reset-button" onclick="resetQuiz()">ë‹¤ì‹œ í’€ê¸°</button>
</div>

<script>
    // í€´ì¦ˆ ë°ì´í„° ì •ì˜
    const quizData = [
        // --- ë‹¨ë‹µí˜• ë¬¸ì œ ---
        {
            type: "short",
            question: "íœ´ëŒ€ ì „í™” ë° ì „ì ê¸°ê¸°ë¥¼ ì´ìš©í•˜ì—¬ ì‹œê°„ê³¼ ì¥ì†Œì— êµ¬ì• ë°›ì§€ ì•Šê³  ì •ë³´ë¥¼ ì‰½ê²Œ ì²˜ë¦¬í•˜ê³  ì˜ì‚¬ ì†Œí†µì´ ê°€ëŠ¥í•œ ê¸°ìˆ ì€ ë¬´ì—‡ì¼ê¹Œìš”?",
            answer: "ì •ë³´í†µì‹ ê¸°ìˆ ", // ë„ì–´ì“°ê¸° ë¬´ì‹œë˜ë¯€ë¡œ "ì •ë³´ í†µì‹  ê¸°ìˆ "ë„ ê°€ëŠ¥
            id: "short1"
        },
        {
            type: "short",
            question: "ê¸°ì¡´ ì „ë ¥ë§ì— ì •ë³´í†µì‹ ê¸°ìˆ ì„ ì ‘ëª©í•´ ì „ë ¥ ìƒì‚°, ì†¡ì „, ë°°ì „, ì†Œë¹„ ì „ ê³¼ì •ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ê³  ì œì–´í•˜ëŠ” ì°¨ì„¸ëŒ€ ì „ë ¥ë§ì€ ë¬´ì—‡ì¼ê¹Œìš”?",
            answer: "ìŠ¤ë§ˆíŠ¸ê·¸ë¦¬ë“œ",
            id: "short2"
        },
        {
            type: "short",
            question: "ì‚¬ë¬¼ì— ì„¼ì„œì™€ í†µì‹  ê¸°ìˆ ì„ ë‚´ì¥í•˜ê³  ì¸í„°ë„·ì— ì—°ê²°í•˜ì—¬ ì •ë³´ë¥¼ ì „ì†¡í•˜ê³  í†µì‹ í•˜ëŠ” ê¸°ìˆ ì„ ë¬´ì—‡ì´ë¼ê³  í• ê¹Œìš”? (ì•½ì í¬í•¨)",
            answer: "ì‚¬ë¬¼ì¸í„°ë„·(IoT)",
            id: "short3"
        },
        // --- ì„œìˆ í˜• ë¬¸ì œ ---
        {
            type: "essay",
            question: "ë°”ë¦¬ìŠ¤íƒ€ ë¡œë´‡ì˜ ì¥ì ì„ ëª¨ë‘ ì„œìˆ í•˜ì‹œì˜¤.",
            answers: [
                "ì¼ê´€ëœ í’ˆì§ˆ, ê· ì¼í•œ ë§›.",
                "íš¨ìœ¨ì„±, ì¸ê°„ë³´ë‹¤ ë¹ ë¦„.",
                "ë¹„ìš© ì ˆê°, ì‰¬ì§€ì•Šê³  ì¼í•¨.",
                "ìœ„ìƒ, ìœ„ìƒì  í™˜ê²½ ê´€ë¦¬.",
                "ë‹¤ì–‘ì„±, ë‹¤ì–‘í•œ ë©”ë‰´ ê°€ëŠ¥."
            ],
            id: "essay1"
        },
        {
            type: "essay",
            question: "ì¸ê³µì§€ëŠ¥ ê¸°ìˆ  ë°œì „ì˜ ì£¼ìš” í•œê³„ì  6ê°€ì§€ë¥¼ ì„œìˆ í•˜ì‹œì˜¤. (ì˜ˆ: í”„ë¼ì´ë²„ì‹œ ì¹¨í•´)",
            answers: [
                "í”„ë¼ì´ë²„ì‹œ ì¹¨í•´",
                "í¸ê²¬ê³¼ ì°¨ë³„",
                "ì¼ìë¦¬ ê°ì†Œ",
                "ë””ì§€í„¸ ê²©ì°¨ ë°œìƒ",
                "í•´í‚¹ ë“± ì‚¬ì´ë²„ ë³´ì•ˆ ìœ„í—˜",
                "ì¸ê³µì§€ëŠ¥ì˜ ì˜¤ë‚¨ìš©"
            ],
            id: "essay2"
        },
        {
            type: "essay",
            question: "ìŠ¤ë§ˆíŠ¸íŒœ(ë†ì—…)ì—ì„œ ì‚¬ë¬¼ ì¸í„°ë„· ê¸°ìˆ ì´ ì ìš©ë˜ëŠ” 3ê°€ì§€ ì˜ˆì‹œë¥¼ ì„œìˆ í•˜ì‹œì˜¤.",
            answers: [
                "í† ì–‘ ì„¼ì„œë¥¼ ì´ìš©í•˜ì—¬ ìˆ˜ë¶„ëŸ‰, pH ë†ë„, ì˜¨ë„ ë“±ì„ ì¸¡ì •í•˜ê³ , ê¸°ìƒ ì„¼ì„œëŠ” ì˜¨ë„, ìŠµë„, ì¼ì‚¬ëŸ‰, ê°•ìš° ë“±ì„ ëª¨ë‹ˆí„°ë§ í•¨.",
                "ìë™ ê´€ê°œ ì‹œìŠ¤í…œì„ ì´ìš©í•˜ì—¬ í•„ìš”í•œ ì–‘ì˜ ìˆ˜ë¶„ì„ ê³µê¸‰í•¨.",
                "ì‘ë¬¼ì˜ ì˜ì–‘ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³  í•„ìš”í•œ ë¹„ë£Œì™€ ì˜ì–‘ì†Œë¥¼ ê³µê¸‰í•¨."
            ],
            id: "essay3"
        }
    ];

    // í€´ì¦ˆë¥¼ HTMLì— ë™ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” í•¨ìˆ˜
    function loadQuiz() {
        const container = document.getElementById('quiz-container');
        container.innerHTML = '';
        
        // ë‹¨ë‹µí˜• ì„¹ì…˜
        let shortAnswerHTML = '<div class="question-section" id="short-answers"><h2>ë‹¨ë‹µí˜• ë¬¸ì œ (ìë™ ì±„ì )</h2>';
        quizData.filter(q => q.type === 'short').forEach((q, index) => {
            shortAnswerHTML += `
                <div class="question-box">
                    <p><strong>${index + 1}.</strong> ${q.question}</p>
                    <input type="text" id="${q.id}-input" data-answer="${q.answer.replace(/\s/g, '').toLowerCase()}" placeholder="ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”" />
                    <div class="result" id="${q.id}-result"></div>
                </div>
            `;
        });
        shortAnswerHTML += '</div>';
        container.innerHTML += shortAnswerHTML;

        // ì„œìˆ í˜• ì„¹ì…˜
        let essayHTML = '<div class="question-section" id="essay-answers"><h2>ì„œìˆ í˜• ë¬¸ì œ (ìê°€ ì±„ì )</h2><div id="essay-score-display"></div>';
        quizData.filter(q => q.type === 'essay').forEach((q, index) => {
            // ì„œìˆ í˜• ë‹µì•ˆ ì…ë ¥ í•„ë“œëŠ” ë‹µì˜ ê°œìˆ˜ë§Œí¼ ìƒì„±
            const answerInputs = q.answers.map((ans, idx) => 
                `<input type="text" class="short-answer-input" id="${q.id}-input-${idx}" placeholder="${idx + 1}ë²ˆì§¸ ë‹µì•ˆì„ ì…ë ¥í•˜ì„¸ìš”" />`
            ).join('');

            // ëª¨ë²” ë‹µì•ˆ ì²´í¬ë°•ìŠ¤ ëª©ë¡
            const correctAnswerList = q.answers.map((ans, idx) => 
                `<div class="essay-answer-item">
                    <input type="checkbox" id="${q.id}-check-${idx}" data-index="${idx}" onchange="updateEssayScore('${q.id}')">
                    <span>${ans}</span>
                </div>`
            ).join('');

            essayHTML += `
                <div class="question-box" data-essay-id="${q.id}">
                    <p><strong>${index + 1}.</strong> ${q.question}</p>
                    ${answerInputs}
                    <button class="answer-button" onclick="toggleEssayAnswer('${q.id}')">ëª¨ë²” ë‹µì•ˆ ë³´ê¸°/ìˆ¨ê¸°ê¸°</button>
                    
                    <div class="essay-answer-box" id="${q.id}-answer-box" data-total-answers="${q.answers.length}">
                        <h4>âœï¸ ëª¨ë²” ë‹µì•ˆ</h4>
                        <p><strong>ì •ë‹µê³¼ ë¹„êµ í›„, í‹€ë¦° ë¬¸í•­ì— ì²´í¬í•˜ì„¸ìš”.</strong></p>
                        ${correctAnswerList}
                        <div class="result" id="${q.id}-score"></div>
                    </div>
                </div>
            `;
        });
        essayHTML += '</div>';
        container.innerHTML += essayHTML;

        updateEssayScoreDisplay();
    }

    // ë‹¨ë‹µí˜• ë¬¸ì œ ìë™ ì±„ì  í•¨ìˆ˜
    function checkShortAnswers() {
        let correctCount = 0;
        let totalCount = 0;

        quizData.filter(q => q.type === 'short').forEach(q => {
            const inputElement = document.getElementById(`${q.id}-input`);
            const resultElement = document.getElementById(`${q.id}-result`);
            const userAnswer = inputElement.value.replace(/\s/g, '').toLowerCase(); // ë„ì–´ì“°ê¸° ì œê±°, ì†Œë¬¸ì ë³€í™˜
            const correctAnswer = q.answer.replace(/\s/g, '').toLowerCase();

            resultElement.classList.remove('correct', 'incorrect');
            totalCount++;

            if (userAnswer === correctAnswer) {
                resultElement.textContent = 'âœ… ì •ë‹µì…ë‹ˆë‹¤!';
                resultElement.classList.add('correct');
                correctCount++;
            } else if (userAnswer === "") {
                 resultElement.textContent = 'âŒ ë‹µì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.';
                 resultElement.classList.add('incorrect');
            } else {
                resultElement.textContent = `âŒ ì˜¤ë‹µì…ë‹ˆë‹¤! (ì •ë‹µ: ${q.answer})`;
                resultElement.classList.add('incorrect');
            }
        });
        
        // ìµœì¢… ì ìˆ˜ í‘œì‹œ
        const finalScoreDisplay = document.getElementById('final-score-display');
        const shortAnswerCorrect = correctCount;
        const shortAnswerTotal = totalCount;
        const essayIncorrect = calculateTotalEssayIncorrect();

        finalScoreDisplay.style.display = 'block';
        finalScoreDisplay.innerHTML = `
            <h2>ìµœì¢… ì±„ì  ê²°ê³¼</h2>
            <p><strong>ë‹¨ë‹µí˜• ì ìˆ˜:</strong> ${shortAnswerCorrect} / ${shortAnswerTotal} ë¬¸ì œ ì •ë‹µ</p>
            <p><strong>ì„œìˆ í˜• ìê°€ ì±„ì  ê²°ê³¼:</strong> í‹€ë¦° ë¬¸í•­ ${essayIncorrect}ê°œ</p>
            <p><strong>ğŸ”¥ ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤!</strong></p>
        `;
    }

    // ì„œìˆ í˜• ë¬¸ì œ ëª¨ë²” ë‹µì•ˆ í† ê¸€ í•¨ìˆ˜
    function toggleEssayAnswer(id) {
        const answerBox = document.getElementById(`${id}-answer-box`);
        const isVisible = answerBox.style.display === 'block';
        answerBox.style.display = isVisible ? 'none' : 'block';
    }

    // ì„œìˆ í˜• ë¬¸ì œ í‹€ë¦° ê°œìˆ˜ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    function updateEssayScore(id) {
        const answerBox = document.getElementById(`${id}-answer-box`);
        const checkboxes = answerBox.querySelectorAll('input[type="checkbox"]');
        const totalAnswers = parseInt(answerBox.dataset.totalAnswers);
        let incorrectCount = 0;
        
        checkboxes.forEach(checkbox => {
            if (checkbox.checked) {
                incorrectCount++;
            }
        });
        
        const scoreElement = document.getElementById(`${id}-score`);
        const correctCount = totalAnswers - incorrectCount;
        
        scoreElement.textContent = `í˜„ì¬ í‹€ë¦° ë¬¸í•­: ${incorrectCount}ê°œ (ì´ ${totalAnswers}ê°œ ì¤‘ ${correctCount}ê°œ ë§ìŒìœ¼ë¡œ ê°€ì •)`;
        scoreElement.classList.remove('correct', 'incorrect');
        if (incorrectCount > 0) {
            scoreElement.classList.add('incorrect');
        } else {
            scoreElement.classList.add('correct');
        }

        updateEssayScoreDisplay();
    }

    // ì „ì²´ ì„œìˆ í˜• í‹€ë¦° ê°œìˆ˜ í‘œì‹œ ì—…ë°ì´íŠ¸
    function updateEssayScoreDisplay() {
        const totalIncorrect = calculateTotalEssayIncorrect();
        const display = document.getElementById('essay-score-display');
        display.textContent = `ğŸ’¡ ì„œìˆ í˜• ì´ í‹€ë¦° ë¬¸í•­: ${totalIncorrect}ê°œ`;
        if (totalIncorrect > 0) {
            display.style.color = '#dc3545';
        } else {
            display.style.color = '#28a745';
        }
    }

    // ì „ì²´ ì„œìˆ í˜• í‹€ë¦° ê°œìˆ˜ ê³„ì‚°
    function calculateTotalEssayIncorrect() {
        let totalIncorrect = 0;
        quizData.filter(q => q.type === 'essay').forEach(q => {
            const answerBox = document.getElementById(`${q.id}-answer-box`);
            if (answerBox) { // answerBoxê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš°ì—ë§Œ ì²˜ë¦¬
                const checkboxes = answerBox.querySelectorAll('input[type="checkbox"]');
                checkboxes.forEach(checkbox => {
                    if (checkbox.checked) {
                        totalIncorrect++;
                    }
                });
            }
        });
        return totalIncorrect;
    }

    // í€´ì¦ˆ ì´ˆê¸°í™” í•¨ìˆ˜
    function resetQuiz() {
        if (confirm('ì •ë§ í€´ì¦ˆë¥¼ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            // ëª¨ë“  ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
            document.querySelectorAll('input[type="text"]').forEach(input => input.value = '');
            // ëª¨ë“  ê²°ê³¼ ë©”ì‹œì§€ ì´ˆê¸°í™”
            document.querySelectorAll('.result').forEach(result => {
                result.textContent = '';
                result.classList.remove('correct', 'incorrect');
            });
            // ì„œìˆ í˜• ì²´í¬ë°•ìŠ¤ ì´ˆê¸°í™”
            document.querySelectorAll('.essay-answer-box input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });
            // ì„œìˆ í˜• ì ìˆ˜ ë° ë°•ìŠ¤ ìˆ¨ê¸°ê¸°
            quizData.filter(q => q.type === 'essay').forEach(q => {
                 const answerBox = document.getElementById(`${q.id}-answer-box`);
                 if (answerBox) answerBox.style.display = 'none';
                 updateEssayScore(q.id); // ì ìˆ˜ í‘œì‹œ ì—…ë°ì´íŠ¸
            });
            // ìµœì¢… ì ìˆ˜ ìˆ¨ê¸°ê¸°
            document.getElementById('final-score-display').style.display = 'none';
        }
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ í€´ì¦ˆ ìƒì„±
    window.onload = loadQuiz;
</script>

</body>
</html>