<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì§€êµ¬ê³¼í•™ ë‹¨ë‹µí˜•/ì„œìˆ í˜• ë¬¸ì œ</title>
    <style>
        /* ê¸°ë³¸ ë‹¤í¬ ëª¨ë“œ ìŠ¤íƒ€ì¼ ìœ ì§€ */
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background-color: #1a1a1a;
            color: #e0e0e0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }
        .container {
            width: 90%;
            max-width: 800px;
            background-color: #2c2c2c;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            text-align: center;
        }
        h1 {
            color: #8ab4f8;
            border-bottom: 2px solid #8ab4f8;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        /* íƒ­ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .tab-buttons {
            display: flex; /* íƒ­ ë²„íŠ¼ì´ í•­ìƒ ë³´ì´ë„ë¡ ëª…ì‹œì ìœ¼ë¡œ ì„¤ì • */
            justify-content: center;
            margin-bottom: 30px;
        }
        .tab-btn {
            padding: 15px 25px; /* ë²„íŠ¼ ê°„ê²© ì¡°ì • */
            font-size: 1.1em;
            font-weight: bold;
            border: none;
            cursor: pointer;
            background-color: #383838;
            color: #aaa;
            border-radius: 10px 10px 0 0;
            transition: background-color 0.3s, color 0.3s;
            white-space: nowrap; /* í…ìŠ¤íŠ¸ ì¤„ë°”ê¿ˆ ë°©ì§€ */
        }
        .tab-btn.active {
            background-color: #4a4a4a;
            color: #8ab4f8;
            border-bottom: 4px solid #8ab4f8;
        }
        .tab-btn:not(.active):hover {
            background-color: #444;
        }
        /* í€´ì¦ˆ ì˜ì—­ ë° ì…ë ¥ ìŠ¤íƒ€ì¼ (ê¸°ì¡´ ìœ ì§€) */
        #quiz-status { font-size: 1.2em; margin-bottom: 20px; color: #cccccc; }
        #question-box { min-height: 150px; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 20px; margin-bottom: 30px; background-color: #383838; border-radius: 10px; }
        #question-text { font-size: 1.4em; font-weight: bold; margin-bottom: 20px; line-height: 1.5; text-align: left; width: 100%; }
        /* ë‹¨ì¼ ì…ë ¥ í•„ë“œ */
        #answer-input { width: 80%; padding: 12px; font-size: 1.1em; border: 2px solid #555; border-radius: 8px; background-color: #444; color: #e0e0e0; text-align: center; outline: none; transition: border-color 0.3s; }
        #answer-input:focus { border-color: #8ab4f8; }

        /* ë‹¤ì¤‘ ì…ë ¥ í•„ë“œ ì»¨í…Œì´ë„ˆ ë° ë‚´ë¶€ ìŠ¤íƒ€ì¼ */
        #multi-answer-input-container {
            width: 80%; 
            margin: 0 auto; 
            display: flex; 
            flex-direction: column; 
            gap: 8px;
            align-items: center;
        }
        .multi-answer-input {
            width: 100%;
            padding: 10px;
            font-size: 1em;
            border: 1px solid #555;
            border-radius: 5px;
            background-color: #444;
            color: #e0e0e0;
            text-align: center;
            outline: none;
            box-sizing: border-box;
            transition: border-color 0.3s;
        }
        .multi-answer-input:focus { border-color: #8ab4f8; }

        /* ì„œìˆ í˜• ì…ë ¥ í•„ë“œ */
        .essay-input-container { width: 90%; margin: 10px auto; }
        .essay-input-container textarea { width: 100%; height: 100px; padding: 10px; font-size: 1em; border: 2px solid #555; border-radius: 8px; background-color: #444; color: #e0e0e0; resize: vertical; outline: none; box-sizing: border-box; }
        
        /* ì±„ì  ë°•ìŠ¤ ê³µí†µ ìŠ¤íƒ€ì¼ */
        #essay-answer-box, #master-essay-answer-box { background-color: #444; border: 1px solid #666; padding: 15px; border-radius: 8px; margin-top: 15px; text-align: left; display: none; }
        #essay-answer-box h4, #master-essay-answer-box h4 { color: #8ab4f8; margin-top: 0; }
        #essay-score-buttons { margin-top: 10px; text-align: center; }
        
        /* ë§ˆìŠ¤í„° ì„œìˆ í˜• ê²°ê³¼ ìŠ¤íƒ€ì¼ */
        #master-essay-criteria-list div {
            padding: 8px;
            margin-bottom: 5px;
            border-bottom: 1px dotted #555;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .master-score-text { font-size: 1.0em; flex-grow: 1; }
        .master-score-text.achieved { color: #85e085; font-weight: bold; }
        
        /* ë§ˆìŠ¤í„° ì„œìˆ í˜• ì±„ì  ê¸°ì¤€ ë¯¸ë¦¬ë³´ê¸° ìŠ¤íƒ€ì¼ */
        #master-essay-guide {
            background-color: #383838;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            margin-bottom: 20px;
            text-align: left;
            border: 1px solid #8ab4f8;
            width: 90%;
            margin-left: auto;
            margin-right: auto;
        }
        #master-essay-guide h4 {
            color: #ffeb3b;
            margin-top: 0;
            margin-bottom: 10px;
            border-bottom: 1px dashed #555;
            padding-bottom: 5px;
        }
        #master-essay-guide ul {
            list-style: none;
            padding-left: 0;
        }
        #master-essay-guide ul li {
            margin-bottom: 5px;
            font-size: 0.95em;
        }

        .button-group { display: flex; justify-content: center; gap: 15px; }
        .quiz-button { padding: 12px 25px; font-size: 1.1em; border: none; border-radius: 8px; cursor: pointer; transition: background-color 0.3s, transform 0.1s; }
        #check-button { background-color: #a8a8a8; color: #1a1a1a; }
        #next-button { background-color: #8ab4f8; color: #1a1a1a; display: none; }
        .essay-score-btn { padding: 8px 15px; font-size: 1em; margin: 0 5px; }
        .correct-btn { background-color: #85e085; color: #1a1a1a; }
        .incorrect-btn { background-color: #ff8a80; color: #1a1a1a; }
        .result { margin-top: 15px; font-size: 1.2em; font-weight: bold; min-height: 30px; }
        .correct { color: #85e085; }
        .incorrect { color: #ff8a80; }
        .partial-correct { color: #ffeb3b; } /* ë¶€ë¶„ ì •ë‹µ ìƒ‰ìƒ */
        #final-score { margin-top: 40px; padding: 20px; border: 2px solid #8ab4f8; border-radius: 10px; font-size: 1.3em; }
        .quiz-button:disabled { opacity: 0.5; cursor: not-allowed; }
    </style>
</head>
<body>

<div class="container">
    <h1>ì§€êµ¬ê³¼í•™ ë‹¨ë‹µí˜•/ì„œìˆ í˜• ë¬¸ì œ</h1>

    <div class="tab-buttons" id="tab-container" style="display: flex;">
        <button class="tab-btn active" id="short-tab-btn" onclick="setMode('short')">ë‹¨ë‹µí˜• í€´ì¦ˆ</button>
        <button class="tab-btn" id="essay-tab-btn" onclick="setMode('essay')">ì„œìˆ í˜• í€´ì¦ˆ</button>
        <button class="tab-btn" id="master_essay-tab-btn" onclick="setMode('master_essay')">ë§ˆìŠ¤í„° ì„œìˆ í˜•</button>
        <button class="tab-btn" id="review-tab-btn" onclick="setMode('review')">ì˜¤ë‹µ ë…¸íŠ¸ (0)</button>
    </div>

    <div id="quiz-content-area">
        <div id="quiz-status"></div>

        <div id="quiz-area">
            <div id="question-box">
                <div id="question-text"></div>
                
                <div id="master-essay-guide" style="display: none;">
                    <h4>ğŸ”” ë§ˆìŠ¤í„° ì„œìˆ í˜• ì±„ì  ê¸°ì¤€ (ì´ì : <span id="master-total-score-display">100</span>ì )</h4>
                    <ul id="master-essay-criteria-preview">
                        </ul>
                </div>
                
                <input type="text" id="answer-input" placeholder="ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”" style="display: none;"/>
                
                <div id="multi-answer-input-container" style="display: none;">
                    <p id="multi-answer-guide" style="font-size: 0.9em; margin-bottom: 15px; color: #ff8a80;"></p>
                    </div>

                <div class="essay-input-container" id="essay-input-area" style="display: none;">
                    <textarea id="essay-user-answer" placeholder="ë‹µì•ˆì„ ì„œìˆ í•˜ì„¸ìš”."></textarea>
                    
                    <div id="essay-answer-box">
                        <h4>ëª¨ë²” ë‹µì•ˆ</h4>
                        <pre id="essay-correct-answer" style="white-space: pre-wrap; font-family: inherit;"></pre>
                        <div id="essay-score-buttons">
                            <p>ìœ„ì˜ ëª¨ë²” ë‹µì•ˆê³¼ ë¹„êµí•˜ì—¬ ì±„ì í•´ì£¼ì„¸ìš”.</p>
                            <button class="quiz-button essay-score-btn correct-btn" onclick="setEssayResult(true)">O (ë§ìŒ)</button>
                            <button class="quiz-button essay-score-btn incorrect-btn" onclick="setEssayResult(false)">X (í‹€ë¦¼)</button>
                        </div>
                    </div>
                    
                    <div id="master-essay-answer-box">
                        <h4>ëª¨ë²” ë‹µì•ˆ</h4>
                        <pre id="master-essay-correct-answer" style="white-space: pre-wrap; font-family: inherit;"></pre>
                        <div id="master-essay-score-container" style="margin-top: 15px;">
                            <h4>ìë™ ì±„ì  ê¸°ì¤€ ì ìš© ê²°ê³¼ (ì´ <span id="max-master-score">0</span>ì )</h4>
                            <div id="master-essay-criteria-list">
                                </div>
                            <p style="margin-top: 10px; font-weight: bold; color: #8ab4f8;">ìµœì¢… íšë“ ì ìˆ˜: <span id="current-master-score">0</span>ì </p>
                        </div>
                    </div>
                </div>
                
                <div class="result" id="result-text"></div>
            </div>

            <div class="button-group">
                <button class="quiz-button" id="check-button" onclick="handleCheck()">Enterë¡œ ì •ë‹µ í™•ì¸</button>
                <button class="quiz-button" id="next-button" onclick="nextQuestion()" style="display: none;">Space/Enterë¡œ ë‹¤ìŒ ë¬¸ì œ</button>
            </div>
        </div>
    </div>
    
    <div id="control-panel" style="margin-top: 20px; display: flex; justify-content: center; gap: 15px;">
        <button class="quiz-button" onclick="startGame()" style="background-color: #4CAF50; color: #1a1a1a;">ë¬¸ì œ ì„ê¸° (ì¬ì‹œì‘)</button>
        <button class="quiz-button" onclick="resetIncorrectAnswers()" style="background-color: #ff6347; color: #1a1a1a;">ì˜¤ë‹µ ë…¸íŠ¸ ì „ì²´ ì´ˆê¸°í™”</button>
    </div>

    <div id="final-score" style="display: none;"></div>
</div>

<script>
    // --- ì›ë³¸ í€´ì¦ˆ ë°ì´í„° ì •ì˜ ---
    const sourceQuizData = [
        // --- ë‹¨ë‹µí˜• ë¬¸ì œ (ë‹¨ì¼ ì •ë‹µ, 35ê°œ) ---
        { type: "short", q: "ê¸°ì¡´ ì „ë ¥ë§ì— ì •ë³´í†µì‹ ê¸°ìˆ ì„ ì ‘ëª©í•´ ì „ë ¥ ìƒì‚°, ì†¡ì „, ë°°ì „, ì†Œë¹„ ì „ ê³¼ì •ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ê³  ì œì–´í•˜ëŠ” ì°¨ì„¸ëŒ€ ì „ë ¥ë§ì€?", a: "ìŠ¤ë§ˆíŠ¸ê·¸ë¦¬ë“œ", id: "s-1" },
        { type: "short", q: "íœ´ëŒ€ ì „í™” ë° ì „ì ê¸°ê¸°ë¥¼ ì´ìš©í•˜ì—¬ ì‹œê°„ê³¼ ì¥ì†Œì— êµ¬ì• ë°›ì§€ ì•Šê³  ì •ë³´ë¥¼ ì‰½ê²Œ ì²˜ë¦¬í•˜ê³  ì˜ì‚¬ ì†Œí†µì´ ê°€ëŠ¥í•œ ê¸°ìˆ ì€?", a: "ì •ë³´í†µì‹ ê¸°ìˆ ", id: "s-2" },
        { type: "short", q: "íƒœì–‘/í’ë ¥/ìˆ˜ë ¥ ë°œì „, íƒ„ì†Œ ë°°ì¶œ ê°ì†Œ, ì—ë„ˆì§€ ì €ì¥ ê¸°ìˆ  ë“±ì„ í†µí•´ ì§€ì† ê°€ëŠ¥í•œ ë°œì „ê³¼ ì§€êµ¬ í™˜ê²½ ë¬¸ì œ í•´ê²°ì— ë„ì›€ì„ ì£¼ëŠ” ê¸°ìˆ ì€?", a: "ì‹ ì¬ìƒì—ë„ˆì§€ê¸°ìˆ ", id: "s-3" },
        { type: "short", q: "ë“œë¡ ì´ë‚˜ ì„¼ì„œë¥¼ ì´ìš©í•œ ì •ë°€ ë†ì—…, ìœ ì „ì ë³€í˜• ì‘ë¬¼, ìˆ˜ì§ ë†ì—… ë“± ì‹ëŸ‰ ë¬¸ì œ í•´ê²°ì— ê¸°ì—¬í•˜ëŠ” ê¸°ìˆ ì€?", a: "ë†ì—…ê¸°ìˆ ", id: "s-4" },
        { type: "short", q: "MRI, CT, ì²¨ë‹¨ ì˜ìƒ ì§„ë‹¨, ì •ë°€ ì˜í•™, ì¬ìƒ ì˜í•™ ë“±ì„ í†µí•´ ì¸ê°„ì˜ ê±´ê°•í•œ ì‚¶ ìœ ì§€ì— ê¸°ì—¬í•˜ëŠ” ê¸°ìˆ ì€?", a: ["ì˜í•™ê¸°ìˆ ", "ì˜ë£Œê¸°ìˆ "], num_req: 1, id: "s-5" },
        { type: "short", q: "ì¸ê³µì§€ëŠ¥ ê¸°ìˆ ì„ í™œìš©í•´ ìƒí™©ì„ ìŠ¤ìŠ¤ë¡œ íŒë‹¨í•˜ë©° ììœ¨ì ìœ¼ë¡œ ì›€ì§ì´ëŠ” ë¡œë´‡ì€?", a: "ì¸ê³µì§€ëŠ¥ë¡œë´‡", id: "s-6" },
        { type: "short", q: "ì‚¬ë¬¼ì— ì„¼ì„œì™€ í†µì‹  ê¸°ìˆ ì„ ë‚´ì¥í•˜ê³  ì¸í„°ë„·ì— ì—°ê²°í•˜ì—¬ ì •ë³´ë¥¼ ì „ì†¡í•˜ê³  í†µì‹ í•˜ëŠ” ê¸°ìˆ  (ì•½ì í¬í•¨)ì€?", a: "ì‚¬ë¬¼ì¸í„°ë„·(IoT)", id: "s-7" },
        { type: "short", q: "ì¡°ëª…, ëƒ‰ë‚œë°©, ë³´ì•ˆì‹œìŠ¤í…œ ë“±ì„ ìŠ¤ë§ˆíŠ¸ ê¸°ê¸°ë¡œ ì œì–´í•˜ëŠ” ì‚¬ë¬¼ ì¸í„°ë„· í™œìš© ì˜ˆëŠ”?", a: "í™ˆìë™í™”", id: "s-8" },
        { type: "short", q: "ì‹¤ì‹œê°„ êµí†µ ì •ë³´ë¥¼ ë¶„ì„, ì¡°ì •í•˜ì—¬ êµí†µí˜¼ì¡ì„ ê°ì†Œì‹œí‚¤ëŠ” ì‚¬ë¬¼ ì¸í„°ë„· í™œìš© ì˜ˆëŠ”?", a: "ìŠ¤ë§ˆíŠ¸êµí†µì‹œìŠ¤í…œ", id: "s-9" },
        { type: "short", q: "í™˜ìì˜ ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ìˆ˜ì§‘, ë¶„ì„í•˜ì—¬ íš¨ìœ¨ì ì¸ ì§„ë£Œë¥¼ ì œê³µí•˜ëŠ” ì‚¬ë¬¼ ì¸í„°ë„· í™œìš© ì˜ˆëŠ”?", a: "ìŠ¤ë§ˆíŠ¸ë³‘ì›", id: "s-10" },
        { type: "short", q: "ìƒì‚° ê³µì •ì˜ ìë™í™”ë¡œ ìƒì‚°ì„±ì„ í–¥ìƒí•˜ê³ , ë¹„ìš©ì„ ì ˆê°í•˜ë©°, í’ˆì§ˆ ê´€ë¦¬ë¥¼ ê°•í™”í•˜ëŠ” ì‚¬ë¬¼ ì¸í„°ë„· í™œìš© ì˜ˆëŠ”?", a: "ìŠ¤ë§ˆíŠ¸ê³µì¥", id: "s-11" },
        { type: "short", q: "í† ì–‘ ìˆ˜ë¶„, ê¸°í›„ ì¡°ê±´, ì‘ë¬¼ ì„±ì¥ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ì—¬ ë†ì‘ë¬¼ ìƒì‚°ì„± í–¥ìƒì‹œí‚¤ëŠ” ì‚¬ë¬¼ ì¸í„°ë„· í™œìš© ì˜ˆëŠ”?", a: "ìŠ¤ë§ˆíŠ¸ë†ì—…", id: "s-12" },
        { type: "short", q: "ê³¼í•™ê¸°ìˆ ì˜ ë°œì „ìœ¼ë¡œ ë‚˜íƒ€ë‚˜ ë‹¤ì–‘í•œ ì‚¬íšŒ êµ¬ì„±ì›ë“¤ì—ê²Œ ë…¼ë€ì„ ì¼ìœ¼í‚¤ëŠ” ë¬¸ì œë¥¼ ë¬´ì—‡ì´ë¼ê³  í•˜ë©°, ì•½ìëŠ”?", a: "ê³¼í•™ê´€ë ¨ì‚¬íšŒì ìŸì (SSI)", id: "s-14" },
        { type: "short", q: "'Not In My Back Yard'ì˜ ì•½ìë¡œ, í˜ì˜¤ ì‹œì„¤ ë“±ì´ ìì‹ ì˜ ê±°ì£¼ ì§€ì—­ì— ë“¤ì–´ì˜¤ëŠ” ê²ƒì„ ë°˜ëŒ€í•˜ëŠ” í˜„ìƒì€?", a: "NIMBY", id: "s-15" },
        { type: "short", q: "'Please In My Front Yard'ì˜ ì•½ìë¡œ, ì´ìµì´ ë˜ëŠ” ì‹œì„¤ì„ ìê¸° ê±°ì£¼ ì§€ì—­ì— ìœ ì¹˜í•˜ë ¤ëŠ” í˜„ìƒì€?", a: "PIMFY", id: "s-16" },
        { type: "short", q: "ê³¼í•™ê¸°ìˆ ì„ ì—°êµ¬í•˜ê³ , ì´ìš©í•  ë•Œ ìœ¤ë¦¬ì  ì¸¡ë©´ì„ ê³ ë ¤í•´ ê°€ì¹˜ íŒë‹¨ í•˜ëŠ” ê²ƒì€?", a: "ê³¼í•™ìœ¤ë¦¬", id: "s-17" },
        { type: "short", q: "ì—°êµ¬ ì ˆì°¨ì™€ ê²°ê³¼ë¥¼ ì¡°ì‘í•˜ê±°ë‚˜ ê±°ì§“ìœ¼ë¡œ ë§Œë“¤ì–´ ë‚´ì§€ ì•Šê³ , í•™ë¬¸ ë°œì „ì„ ìœ„í•´ ì—°êµ¬ ë‚´ìš©ì„ ê³µê°œí•˜ëŠ” ì—°êµ¬ ìœ¤ë¦¬ í•­ëª©ì€?", a: "ì •ì§ì„±ê³¼ê°œë°©ì„±", id: "s-18" },
        { type: "short", q: "ë‹¤ë¥¸ ê³¼í•™ìì˜ ì—°êµ¬ ê²°ê³¼ë¥¼ í•¨ë¶€ë¡œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì—°êµ¬ ìœ¤ë¦¬ í•­ëª©ì€?", a: "ì§€ì‹ì¬ì‚°ê¶Œì¡´ì¤‘", id: "s-19" },
        { type: "short", q: "ì‹¤í—˜ ëŒ€ìƒì„ ìœ¤ë¦¬ì ìœ¼ë¡œ ëŒ€í•˜ì—¬ ì‹¤í—˜ ëŒ€ìƒì˜ ìƒëª…ê³¼ ì¡´ì—„ì„±ì„ ì¡´ì¤‘í•˜ëŠ” ì—°êµ¬ ìœ¤ë¦¬ í•­ëª©ì€?", a: "ì‹¤í—˜ëŒ€ìƒì—ëŒ€í•œì¡´ì¤‘", id: "s-20" },
        { type: "short", q: "ì‚¬íšŒì— ì•…ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ì—°êµ¬ëŠ” í”¼í•˜ê³ , ê³µê³µì˜ ì´ìµì„ ìœ„í•´ ë…¸ë ¥í•˜ëŠ” ì—°êµ¬ ìœ¤ë¦¬ í•­ëª©ì€?", a: "ì‚¬íšŒì ì±…ì„", id: "s-21" },
        { type: "short", q: "ì•ˆë½ì‚¬, ë™ë¬¼ ì‹¤í—˜, ë°°ì•„ ì—°êµ¬, ë§ì¶¤ ì•„ê¸° ë“±ê³¼ ê´€ë ¨ëœ ê³¼í•™ ìœ¤ë¦¬ì˜ êµ¬ë¶„ ë¶„ì•¼ëŠ”?", a: "ìƒëª…ìœ¤ë¦¬", id: "s-22" },
        { type: "short", q: "ìœ ì „ì ì¬ì¡°í•©, ì¤„ê¸°ì„¸í¬ ì—°êµ¬, ì¸ê°„ ë³µì œ ë“±ê³¼ ê´€ë ¨ëœ ê³¼í•™ ìœ¤ë¦¬ì˜ êµ¬ë¶„ ë¶„ì•¼ëŠ”?", a: "ìœ ì „ê³µí•™", id: "s-23" },
        { type: "short", q: "í•µë°œì „, ë°©ì‚¬ì„± íê¸°ë¬¼, í•´ì–‘ ìì›ì˜ ì´ìš© ë“±ê³¼ ê´€ë ¨ëœ ê³¼í•™ ìœ¤ë¦¬ì˜ êµ¬ë¶„ ë¶„ì•¼ëŠ”?", a: "ì—ë„ˆì§€", id: "s-24" },
        { type: "short", q: "ê¸°í›„ ë³€í™”, ë¯¸ì„¸ ë¨¼ì§€, ìƒë¬¼ì¢… ê°ì†Œ ë“±ê³¼ ê´€ë ¨ëœ ê³¼í•™ ìœ¤ë¦¬ì˜ êµ¬ë¶„ ë¶„ì•¼ëŠ”?", a: "í™˜ê²½,ìƒíƒœê³„", id: "s-25" },
        { type: "short", q: "ë‚˜ë…¸ ê¸°ìˆ , ë¡œë´‡, ì‹ëŸ‰ ìì›, ìš°ì£¼ í•­í•´, ë“œë¡  ì‚¬ìš© ë²”ìœ„ ë“±ê³¼ ê´€ë ¨ëœ ê³¼í•™ ìœ¤ë¦¬ì˜ êµ¬ë¶„ ë¶„ì•¼ëŠ”?", a: "ê¸°ìˆ ê³µí•™", id: "s-26" },
        { type: "short", q: "ì•ˆë½ì‚¬, ë™ë¬¼ ì‹¤í—˜, ë°°ì•„ ì—°êµ¬, ë§ì¶¤ ì•„ê¸°, ì¸ê³µ ìˆ˜ì •, ëƒ‰ë™ ì¸ê°„ ë“±ê³¼ ê´€ë ¨ëœ ê³¼í•™ ìœ¤ë¦¬ì˜ êµ¬ë¶„ ë¶„ì•¼ëŠ”?", a: "ìƒëª…ìœ¤ë¦¬", id: "s-27" },
        { type: "short", q: "ìœ ì „ì ì¬ì¡°í•©, ì¤„ê¸°ì„¸í¬ ì—°êµ¬, ìœ ì „ì ë³€í˜• ìƒë¬¼, ì¸ê°„ ë³µì œ ë“±ê³¼ ê´€ë ¨ëœ ê³¼í•™ ìœ¤ë¦¬ì˜ êµ¬ë¶„ ë¶„ì•¼ëŠ”?", a: "ìœ ì „ê³µí•™", id: "s-28" },
        { type: "short", q: "ë‚˜ë…¸ ê¸°ìˆ , ë¡œë´‡, ì‹ëŸ‰ ìì›, ìš°ì£¼ í•­í•´, ìš°ì£¼ íƒì‚¬ì„ ì˜ í•µì—°ë£Œ, ë“œë¡  ì‚¬ìš© ë²”ìœ„ ë“±ê³¼ ê´€ë ¨ëœ ê³¼í•™ ìœ¤ë¦¬ì˜ êµ¬ë¶„ ë¶„ì•¼ëŠ”?", a: "ê¸°ìˆ ê³µí•™", id: "s-29" },
        { type: "short", q: "ê¸°í›„ ë³€í™”, ì§€êµ¬ ì˜¨ë‚œí™”, íƒ„ì†Œ ë°°ì¶œê¶Œ, ìì› ê°œë°œ, ëŒ ê±´ì„¤, ë¯¸ì„¸ ë¨¼ì§€, ìƒë¬¼ì¢… ê°ì†Œ, ê´‘ê³µí•´, ë…ì„± í™”í•™ ë¬¼ì§ˆì˜ ë†ì¶•, ìˆ˜ë—ë¬¼ì˜ ë¶ˆì†Œí™” ë“±ê³¼ ê´€ë ¨ëœ ê³¼í•™ ìœ¤ë¦¬ì˜ êµ¬ë¶„ ë¶„ì•¼ëŠ”?", a: "í™˜ê²½,ìƒíƒœê³„", id: "s-30" },
        { type: "short", q: "í•µë°œì „, í•µë°œì „ ì‚¬ê³ , ë°©ì‚¬ì„± íê¸°ë¬¼, í•´ì–‘ ìì›ì˜ ì´ìš© ë“±ê³¼ ê´€ë ¨ëœ ê³¼í•™ ìœ¤ë¦¬ì˜ êµ¬ë¶„ ë¶„ì•¼ëŠ”?", a: "ì—ë„ˆì§€", id: "s-31" },
        { type: "short", q: "í˜„ëŒ€ ì˜ì•½í’ˆ ê°œë°œ, ì„±ì¥ í˜¸ë¥´ëª¬, ë¹„ë§Œê³¼ ë‹¤ì´ì–´íŠ¸, í•­ìƒì¬ ë‚¨ìš© ë“±ê³¼ ê´€ë ¨ëœ ê³¼í•™ ìœ¤ë¦¬ì˜ êµ¬ë¶„ ë¶„ì•¼ëŠ”?", a: "ì˜ë£Œ,ì§ˆë³‘", id: "s-32" },
        { type: "short", q: "í‘œì ˆ, ì •ì‹ ì´ìƒì˜ ì²˜ë²Œ, ê³¼ì†ê³¼ êµí†µì‚¬ê³  ë“±ê³¼ ê´€ë ¨ëœ ê³¼í•™ ìœ¤ë¦¬ì˜ êµ¬ë¶„ ë¶„ì•¼ëŠ”?", a: "ë²•,ë„ë•", id: "s-33" },
        { type: "short", q: "ì§€êµ¬ì´Œ í˜ì˜¤, í™˜ê²½ í˜¸ë¥´ëª¬, ê°€ìƒí˜„ì‹¤, ê¸‰ë°œì§„ ì‚¬ê³ , ì „ìíŒŒ í”¼í•´ ë“±ê³¼ ê´€ë ¨ëœ ê³¼í•™ ìœ¤ë¦¬ì˜ êµ¬ë¶„ ë¶„ì•¼ëŠ”?", a: "ê¸°íƒ€", id: "s-34" },
        { type: "short", q: "ë©€ë¦¬ ë–¨ì–´ì§„ ê³³ê¹Œì§€ ë¹ ë¥´ê²Œ ì´ë™ì‹œì¼œì£¼ëŠ” ê¸°ìˆ ì˜ ì´ë¦„ì€?", a: "êµí†µê¸°ìˆ ", id: "s-35" },

        // --- ë‹¨ë‹µí˜• ë¬¸ì œ (ë‹¤ì¤‘ ì •ë‹µ/ë¶€ë¶„ ì±„ì , 14ê°œ) ---
        { type: "short", q: "ìƒëª…ìœ¤ë¦¬ì˜ ì¤‘ìš”ì„±ì´ ìš”êµ¬ë˜ëŠ” ì‚¬ë¡€ 3ê°€ì§€ë¥¼ ìˆœì„œ ìƒê´€ì—†ì´ ì„œìˆ í•˜ì‹œì˜¤.", a: ["ì•ˆë½ì‚¬", "ë™ë¬¼ì‹¤í—˜", "ë°°ì•„ì—°êµ¬", "ë§ì¶¤ì•„ê¸°", "ì¸ê³µìˆ˜ì •", "ëƒ‰ë™ì¸ê°„"], num_req: 3, id: "s-case-1" },
        { type: "short", q: "ìœ ì „ê³µí•™ì˜ ì¤‘ìš”ì„±ì´ ìš”êµ¬ë˜ëŠ” ì‚¬ë¡€ 3ê°€ì§€ë¥¼ ìˆœì„œ ìƒê´€ì—†ì´ ì„œìˆ í•˜ì‹œì˜¤.", a: ["ìœ ì „ìì¬ì¡°í•©", "ì¤„ê¸°ì„¸í¬ì—°êµ¬", "ìœ ì „ìë³€í˜•ìƒë¬¼", "ì¸ê°„ë³µì œ"], num_req: 3, id: "s-case-2" },
        { type: "short", q: "ê¸°ìˆ ê³µí•™ì˜ ì¤‘ìš”ì„±ì´ ìš”êµ¬ë˜ëŠ” ì‚¬ë¡€ 3ê°€ì§€ë¥¼ ìˆœì„œ ìƒê´€ì—†ì´ ì„œìˆ í•˜ì‹œì˜¤.", a: ["ë‚˜ë…¸ê¸°ìˆ ", "ë¡œë´‡", "ì‹ëŸ‰ìì›", "ìš°ì£¼í•­í•´", "ìš°ì£¼íƒì‚¬ì„ ì˜í•µì—°ë£Œ", "ë“œë¡ ì‚¬ìš©ë²”ìœ„"], num_req: 3, id: "s-case-3" },
        { type: "short", q: "í™˜ê²½, ìƒíƒœê³„ ë¶„ì•¼ì—ì„œ ê³¼í•™ ìœ¤ë¦¬ì˜ ì¤‘ìš”ì„±ì´ ìš”êµ¬ë˜ëŠ” ì‚¬ë¡€ 3ê°€ì§€ë¥¼ ìˆœì„œ ìƒê´€ì—†ì´ ì„œìˆ í•˜ì‹œì˜¤.", a: ["ê¸°í›„ë³€í™”", "ì§€êµ¬ì˜¨ë‚œí™”", "íƒ„ì†Œë°°ì¶œê¶Œ", "ìì›ê°œë°œ", "ëŒê±´ì„¤", "ë¯¸ì„¸ë¨¼ì§€", "ìƒë¬¼ì¢…ê°ì†Œ", "ê´‘ê³µí•´", "ë…ì„±í™”í•™ë¬¼ì§ˆì˜ë†ì¶•", "ìˆ˜ë—ë¬¼ì˜ë¶ˆì†Œí™”"], num_req: 3, id: "s-case-4" },
        { type: "short", q: "ì—ë„ˆì§€ ë¶„ì•¼ì—ì„œ ê³¼í•™ ìœ¤ë¦¬ì˜ ì¤‘ìš”ì„±ì´ ìš”êµ¬ë˜ëŠ” ì‚¬ë¡€ 2ê°€ì§€ë¥¼ ìˆœì„œ ìƒê´€ì—†ì´ ì„œìˆ í•˜ì‹œì˜¤.", a: ["í•µë°œì „", "í•µë°œì „ì‚¬ê³ ", "ë°©ì‚¬ì„±íê¸°ë¬¼", "í•´ì–‘ìì›ì˜ì´ìš©"], num_req: 2, id: "s-case-5" },
        { type: "short", q: "ì˜ë£Œ, ì§ˆë³‘ ë¶„ì•¼ì—ì„œ ê³¼í•™ ìœ¤ë¦¬ì˜ ì¤‘ìš”ì„±ì´ ìš”êµ¬ë˜ëŠ” ì‚¬ë¡€ 2ê°€ì§€ë¥¼ ìˆœì„œ ìƒê´€ì—†ì´ ì„œìˆ í•˜ì‹œì˜¤.", a: ["í˜„ëŒ€ì˜ì•½í’ˆê°œë°œ", "ì„±ì¥í˜¸ë¥´ëª¬", "ë¹„ë§Œê³¼ë‹¤ì´ì–´íŠ¸", "í•­ìƒì œë‚¨ìš©"], num_req: 2, id: "s-case-6" },
        { type: "short", q: "ë²•, ë„ë• ë¶„ì•¼ì—ì„œ ê³¼í•™ ìœ¤ë¦¬ì˜ ì¤‘ìš”ì„±ì´ ìš”êµ¬ë˜ëŠ” ì‚¬ë¡€ 2ê°€ì§€ë¥¼ ìˆœì„œ ìƒê´€ì—†ì´ ì„œìˆ í•˜ì‹œì˜¤.", a: ["í‘œì ˆ", "ì •ì‹ ì´ìƒì˜ì²˜ë²Œ", "ê³¼ì†ê³¼êµí†µì‚¬ê³ "], num_req: 2, id: "s-case-7" },
        { type: "short", q: "ê¸°íƒ€ ë¶„ì•¼ì—ì„œ ê³¼í•™ ìœ¤ë¦¬ì˜ ì¤‘ìš”ì„±ì´ ìš”êµ¬ë˜ëŠ” ì‚¬ë¡€ 2ê°€ì§€ë¥¼ ìˆœì„œ ìƒê´€ì—†ì´ ì„œìˆ í•˜ì‹œì˜¤.", a: ["ì§€êµ¬ì´Œí˜ì˜¤", "í™˜ê²½í˜¸ë¥´ëª¬", "ê°€ìƒí˜„ì‹¤", "ê¸‰ë°œì§„ì‚¬ê³ ", "ì „ìíŒŒí”¼í•´"], num_req: 2, id: "s-case-8" },
        { type: "short", q: "êµí†µ ê¸°ìˆ ì˜ ì˜ˆë¥¼ ì ì–´ë„ 3ê°€ì§€ ìˆœì„œ ìƒê´€ì—†ì´ ì„œìˆ í•˜ì‹œì˜¤.", a: ["ììœ¨ì£¼í–‰ì°¨", "ì „ê¸°ì°¨", "ìŠ¤ë§ˆíŠ¸êµí†µì‹œìŠ¤í…œ"], num_req: 3, id: "s-case-9" },
        { type: "short", q: "ì •ë³´ í†µì‹  ê¸°ìˆ ì˜ ì˜ˆë¥¼ ì ì–´ë„ 3ê°€ì§€ ìˆœì„œ ìƒê´€ì—†ì´ ì„œìˆ í•˜ì‹œì˜¤.", a: ["ì¸í„°ë„·", "íœ´ëŒ€ì „í™”", "ì „ìê¸°ê¸°", "ì†Œì…œë¯¸ë””ì–´", "ì˜¨ë¼ì¸ì‡¼í•‘ë¬¼"], num_req: 3, id: "s-case-10" },
        { type: "short", q: "ì‹ ì¬ìƒ ì—ë„ˆì§€ ê¸°ìˆ ì˜ ì˜ˆë¥¼ ì ì–´ë„ 3ê°€ì§€ ìˆœì„œ ìƒê´€ì—†ì´ ì„œìˆ í•˜ì‹œì˜¤.", a: ["íƒœì–‘ë°œì „", "í’ë ¥ë°œì „", "ìˆ˜ë ¥ë°œì „", "íƒ„ì†Œë°°ì¶œê°ì†Œ", "ìŠ¤ë§ˆíŠ¸ê·¸ë¦¬ë“œ", "ì—ë„ˆì§€ì €ì¥ê¸°ìˆ "], num_req: 3, id: "s-case-11" },
        { type: "short", q: "ë†ì—… ê¸°ìˆ ì˜ ì˜ˆë¥¼ ì ì–´ë„ 2ê°€ì§€ ìˆœì„œ ìƒê´€ì—†ì´ ì„œìˆ í•˜ì‹œì˜¤.", a: ["ì •ë°€ë†ì—…", "ìœ ì „ìë³€í˜•ì‘ë¬¼", "ìˆ˜ì§ë†ì—…"], num_req: 2, id: "s-case-12" },
        { type: "short", q: "ì˜í•™ ê¸°ìˆ ì˜ ì˜ˆë¥¼ ì ì–´ë„ 3ê°€ì§€ ìˆœì„œ ìƒê´€ì—†ì´ ì„œìˆ í•˜ì‹œì˜¤.", a: ["MRI", "CT", "ì´ˆìŒíŒŒ", "ì²¨ë‹¨ì˜ìƒì§„ë‹¨ê¸°ìˆ ", "ì •ë°€ì˜í•™", "ì¬ìƒì˜í•™"], num_req: 3, id: "s-case-13" },
        { type: "short", q: "ì‚¬ë¬¼ ì¸í„°ë„· ê¸°ìˆ ì˜ í™œìš© ì˜ˆì‹œë¥¼ ì ì–´ë„ 3ê°€ì§€ ì´ìƒ ìˆœì„œ ìƒê´€ì—†ì´ ì„œìˆ í•˜ì‹œì˜¤.", a: ["í™ˆìë™í™”", "ìŠ¤ë§ˆíŠ¸êµí†µì‹œìŠ¤í…œ", "ìŠ¤ë§ˆíŠ¸ë³‘ì›", "ìŠ¤ë§ˆíŠ¸ê³µì¥", "ìŠ¤ë§ˆíŠ¸ë†ì¥", "ìŠ¤ë§ˆíŠ¸ë†ì—…", "ìŠ¤ë§ˆíŠ¸íŒœ"], num_req: 3, id: "s-case-14" },
        
        // --- ì„œìˆ í˜• ë¬¸ì œ (ê¸°ì¡´ 18ê°œ) ---
        { type: "essay", q: "ì¸ê³µì§€ëŠ¥ ë¡œë´‡ì˜ í™œìš©ì—ì„œ ê³µì¥ì—ì„œì˜ í™œìš© ì˜ˆë¥¼ ì„œìˆ í•˜ì‹œì˜¤.", a: "ê³µì¥ì—ì„œ ë°˜ë³µì ì´ê³  ìœ„í—˜í•œ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.\nì´ë¥¼ í†µí•´ ìƒì‚° íš¨ìœ¨ì„±ì´ í–¥ìƒë˜ê³ , ìœ„í—˜í•œ ì¼ì— ì‹¤ì‹œê°„ìœ¼ë¡œ ì ì ˆí•˜ê²Œ ëŒ€ì²˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.", id: "e-1" },
        { type: "essay", q: "ì¸ê³µì§€ëŠ¥ ë¡œë´‡ì˜ ì •ì˜ëŠ” ë¬´ì—‡ì¸ê°€?", a: "ì¸ê³µì§€ëŠ¥ ê¸°ìˆ ì„ í™œìš©í•´ ìƒí™©ì„ ìŠ¤ìŠ¤ë¡œ íŒë‹¨í•˜ë©° ììœ¨ì ìœ¼ë¡œ ì›€ì§ì´ëŠ” ë¡œë´‡ì„ ë§í•œë‹¤.", id: "e-1-1" },
        { type: "essay", q: "ì¸ê³µì§€ëŠ¥ ë¡œë´‡ì˜ í™œìš©ì—ì„œ ë¬¼ë¥˜ì—ì„œì˜ í™œìš© ì˜ˆë¥¼ ì„œìˆ í•˜ì‹œì˜¤.", a: "ì°½ê³  ê´€ë¦¬, ìƒí’ˆ ë¶„ë¥˜, ë°°ì†¡ ë“± ë¬¼ë¥˜ ì‘ì—…ì„ ìë™í™”í•˜ì—¬ íš¨ìœ¨ì„±ì„ í–¥ìƒí•œë‹¤.", id: "e-1-2" },
        { type: "essay", q: "ì¸ê³µì§€ëŠ¥ ë¡œë´‡ì˜ í™œìš©ì—ì„œ ì¼ìƒìƒí™œì—ì„œì˜ í™œìš© ì˜ˆë¥¼ ì„œìˆ í•˜ì‹œì˜¤.", a: "ì²­ì†Œ, ìš”ë¦¬ ë¡œë´‡ ë“±ìœ¼ë¡œ ìƒí™œì˜ í¸ë¦¬ì„±ì„ ë†’ì´ê³ , ìŒì„± ëª…ë ¹ì„ í†µí•´ ìŠ¤ë§ˆíŠ¸ í™ˆ ê¸°ê¸°ë¥¼ ì œì–´í•œë‹¤.", id: "e-1-3" },
        { type: "essay", q: "ìŠ¤ë§ˆíŠ¸íŒœ(ë†ì—…)ì—ì„œ ì‚¬ë¬¼ ì¸í„°ë„· ê¸°ìˆ ì´ ì ìš©ë˜ëŠ” êµ¬ì²´ì ì¸ ì˜ˆì‹œ 3ê°€ì§€ë¥¼ í•™ìŠµì§€ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ì„œìˆ í•˜ì‹œì˜¤.", a: "1. í† ì–‘ ì„¼ì„œë¥¼ ì´ìš©í•˜ì—¬ ìˆ˜ë¶„ëŸ‰, pH ë†ë„, ì˜¨ë„ ë“±ì„ ì¸¡ì •í•˜ê³ , ê¸°ìƒ ì„¼ì„œëŠ” ì˜¨ë„, ìŠµë„, ì¼ì‚¬ëŸ‰, ê°•ìš° ë“±ì„ ëª¨ë‹ˆí„°ë§ í•¨.\n2. ìë™ ê´€ê°œ ì‹œìŠ¤í…œì„ ì´ìš©í•˜ì—¬ í•„ìš”í•œ ì–‘ì˜ ìˆ˜ë¶„ì„ ê³µê¸‰í•¨. 3. ì‘ë¬¼ì˜ ì˜ì–‘ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³  í•„ìš”í•œ ë¹„ë£Œì™€ ì˜ì–‘ì†Œë¥¼ ê³µê¸‰í•¨.", id: "e-2" },
        { type: "essay", q: "ë°”ë¦¬ìŠ¤íƒ€ ë¡œë´‡ì˜ ì¥ì  5ê°€ì§€ë¥¼ ëª¨ë‘ ì„œìˆ í•˜ì‹œì˜¤.", a: "1. ì¼ê´€ëœ í’ˆì§ˆ, ê· ì¼í•œ ë§›. 2. íš¨ìœ¨ì„±, ì¸ê°„ë³´ë‹¤ ë¹ ë¦„. 3. ë¹„ìš© ì ˆê°, ì‰¬ì§€ ì•Šê³  ì¼í•¨. 4. ìœ„ìƒ, ìœ„ìƒì  í™˜ê²½ ê´€ë¦¬. 5. ë‹¤ì–‘ì„±, ë‹¤ì–‘í•œ ë©”ë‰´ ê°€ëŠ¥.", id: "e-3" },
        { type: "essay", q: "ë°”ë¦¬ìŠ¤íƒ€ ë¡œë´‡ì˜ ë‹¨ì  5ê°€ì§€ì™€ ì´ì— ëŒ€í•œ ê°œì„  ë°©ì•ˆ 3ê°€ì§€ ì´ìƒì„ ì„œìˆ í•˜ì‹œì˜¤.", a: "ë‹¨ì : ì´ˆê¸°ë¹„ìš©ì´ ë¹„ìŒˆ, í”„ë¡œê·¸ë¨ëœ ê²ƒë§Œ ë§Œë“¬, ê³ ì¥ì´ë‚˜ ì˜¤ë¥˜ ë°œìƒ ê°€ëŠ¥, ê³ ê°ê³¼ ìƒí˜¸ ì‘ìš©ì´ ì—†ìŒ. ë¡œë´‡ ìš´ì˜ì„ ìœ„í•œ ì „ë¬¸ ì¸ë ¥ í•„ìš”. ê°œì„  ë°©ì•ˆ: ìŒì„± ì¸ì‹ í”„ë¡œê·¸ë¨ ì¶”ê°€ (ê³ ê°ê³¼ ì˜ì‚¬ ì†Œí†µ), ì»¤í”¼ ì™¸ì—ë„ ë‹¤ì–‘í•œ ìŒë£Œ ì œê³µ, ì‚¬ëŒê³¼ ë¹„ìŠ·í•˜ê²Œ íŒ”ê³¼ ì–¼êµ´ì„ ë§Œë“¤ì–´ ê°„ë‹¨í•œ í‘œì •ì„ ì§€ì„ ìˆ˜ ìˆë„ë¡ í•¨.", id: "e-4" },
        { type: "essay", q: "ì¸ê³µì§€ëŠ¥ ê¸°ìˆ  ë°œì „ì˜ í•œê³„ 6ê°€ì§€ë¥¼ ì„œìˆ í•˜ì‹œì˜¤.", a: "ì¸ê³µì§€ëŠ¥ ê¸°ìˆ ì˜ í•œê³„: 1. í”„ë¼ì´ë²„ì‹œ ì¹¨í•´, 2. í¸ê²¬ê³¼ ì°¨ë³„, 3. ì¼ìë¦¬ ê°ì†Œ, 4. ë””ì§€í„¸ ê²©ì°¨ ë°œìƒ, 5. í•´í‚¹ ë“± ì‚¬ì´ë²„ ë³´ì•ˆ ìœ„í—˜, 6. ì¸ê³µì§€ëŠ¥ì˜ ì˜¤ë‚¨ìš©.", id: "e-5" },
        { type: "essay", q: "ì˜¤ë˜ëœ í•µ ë°œì „ì†Œì˜ ê°€ë™ ì¤‘ë‹¨ì— ëŒ€í•œ 'ì°¬ì„±' ì…ì¥ê³¼ 'ë°˜ëŒ€' ì…ì¥ì˜ ì£¼ëœ ê·¼ê±°ë¥¼ ê°ê° ì„œìˆ í•˜ì‹œì˜¤.", a: "ì°¬ì„±: ê°€ë™ ì—°í•œì„ ë„˜ì–´ì„œ ê°€ë™í•˜ëŠ” ê²ƒì€ ìœ„í—˜í•˜ë‹¤. ë°˜ëŒ€: í•µ ë°œì „ìœ¼ë¡œ ì „ê¸° ì—ë„ˆì§€ë¥¼ ì €ë ´í•˜ê²Œ ìƒì‚°í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë°”ë¡œ ì¤‘ë‹¨í•˜ë©´ ê²½ì œì  ì†ì‹¤ì´ í¬ë‹¤.", id: "e-6" },
        { type: "essay", q: "ìœ ì „ì ë³€í˜• ìƒë¬¼ì˜ ì¬ë°°ì— ëŒ€í•œ 'ì°¬ì„±' ì…ì¥ê³¼ 'ë°˜ëŒ€' ì…ì¥ì˜ ì£¼ëœ ê·¼ê±°ë¥¼ ê°ê° ì„œìˆ í•˜ì‹œì˜¤.", a: "ì°¬ì„±: ìœ ì „ì ë³€í˜• ìƒë¬¼ì€ ì§ˆë³‘ì—ë„ ê°•í•˜ê³  ìˆ˜í™•ëŸ‰ë„ ë§ì•„ ì¸ë¥˜ì˜ ì‹ëŸ‰ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤. ë°˜ëŒ€: ìœ ì „ì ë³€í˜• ìƒë¬¼ì´ ì¸ê°„ì—ê²Œ ì–´ë–¤ ì˜í–¥ì„ ë¯¸ì¹˜ëŠ”ì§€ êµ¬ì²´ì ìœ¼ë¡œ ì—°êµ¬ë˜ì–´ ìˆì§€ ì•Šìœ¼ë¯€ë¡œ ì¬ë°°ë¥¼ ì œí•œí•´ì•¼ í•œë‹¤.", id: "e-7" },
        { type: "essay", q: "ì‹ ì¬ìƒ ì—ë„ˆì§€ í™œìš© í™•ëŒ€ì— ëŒ€í•œ 'ì°¬ì„±' ì…ì¥ê³¼ 'ë°˜ëŒ€' ì…ì¥ì˜ ì£¼ëœ ê·¼ê±°ë¥¼ ê°ê° ì„œìˆ í•˜ì‹œì˜¤.", a: "ì°¬ì„±: ì‹ ì¬ìƒ ì—ë„ˆì§€ í™œìš©ì„ í™•ëŒ€í•˜ë©´ í™˜ê²½ ì˜¤ì—¼ ë¬¼ì§ˆì˜ ë°°ì¶œì´ ì¤„ì–´ ì§€êµ¬ í™˜ê²½ì„ ë³´í˜¸í•  ìˆ˜ ìˆë‹¤. ë°˜ëŒ€: ì´ˆê¸° ë¹„ìš©ì´ ë§ì´ ë“¤ê³ , ë°œì „ ê³¼ì •ì—ì„œ ì£¼ë³€ í™˜ê²½ì˜ ì˜í–¥ì„ ë°›ì•„ ì•ˆì •ì ìœ¼ë¡œ ì „ê¸°ë¥¼ ìƒì‚°í•˜ê¸° ì–´ë ¤ìš°ë¯€ë¡œ ì£¼ë ¥ ì—ë„ˆì§€ì›ìœ¼ë¡œ ì í•©í•˜ì§€ ì•Šë‹¤.", id: "e-8" },
        { type: "essay", q: "ë™ë¬¼ ì‹¤í—˜ì— ëŒ€í•œ 'ì°¬ì„±' ì…ì¥ê³¼ 'ë°˜ëŒ€' ì…ì¥ì˜ ì£¼ëœ ê·¼ê±°ë¥¼ ê°ê° ì„œìˆ í•˜ì‹œì˜¤.", a: "ì°¬ì„±: ì˜ì•½í’ˆ, í™”ì¥í’ˆ ë“±ì„ ìƒì‚°í•  ë•Œ ì¸ê°„ì´ ì§ì ‘ ì‹¤í—˜ ëŒ€ìƒì´ ë  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ë™ë¬¼ ì‹¤í—˜ì€ ë°˜ë“œì‹œ í•„ìš”í•˜ë‹¤. ë°˜ëŒ€: ì•ˆì •ì„±ì„ ì¶©ë¶„íˆ í™•ë³´í•´ ë¶ˆí•„ìš”í•œ ë™ë¬¼ ì‹¤í—˜ì„ ì¤„ì—¬ì•¼ í•œë‹¤.", id: "e-9" },
        { type: "essay", q: "ê³¼í•™ ê´€ë ¨ ì‚¬íšŒì  ìŸì ì— ëŒ€í•œ 'í•©ë¦¬ì  ì˜ì‚¬ ê²°ì •'ì„ ìœ„í•´ í•„ìš”í•œ ê³¼ì •ì„ ì„œìˆ í•˜ì‹œì˜¤.", a: "ë‹¤ì–‘í•œ ê´€ì ê³¼ ë³µì¡í•œ ìƒí™©ì„ ê³¼í•™ì ìœ¼ë¡œ ì´í•´í•˜ê³ , ì¶©ë¶„í•œ í† ë¡ ì„ ê±°ì³ í•©ë¦¬ì ìœ¼ë¡œ ì˜ì‚¬ ê²°ì •ì„ ë‚´ë¦´ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.", id: "e-10" },
        { type: "essay", q: "ê³¼í•™ê¸°ìˆ ì´ ë°”ëŒì§í•˜ê²Œ ë°œì „í•˜ê¸° ìœ„í•´ ê³¼í•™ ìœ¤ë¦¬ë¥¼ ì§€ì¼œì•¼ í•˜ëŠ” ì´ìœ ë¥¼ ê³¼í•™ ìœ¤ë¦¬ì˜ ì¤‘ìš”ì„±ê³¼ ì—°ê´€ì§€ì–´ ì„œìˆ í•˜ì‹œì˜¤.", a: "ê³¼í•™ ê¸°ìˆ ì˜ ë°œì „ì´ ê°€ì ¸ì˜¬ ê³¼í•™ ê´€ë ¨ ì‚¬íšŒì  ìŸì ì„ ì˜ˆì¸¡í•˜ê¸° ì–´ë µê¸° ë•Œë¬¸ì—, ìœ¤ë¦¬ì  íƒœë„ë¥¼ ê°–ì¶”ì–´ ê³¼í•™ ê¸°ìˆ ì´ ê¸ì •ì ìœ¼ë¡œ ë°œì „í•  ìˆ˜ ìˆë„ë¡ ë…¸ë ¥í•´ì•¼ í•œë‹¤.", id: "e-11" },
        { type: "essay", q: "ì •ë³´ í†µì‹  ê¸°ìˆ  ë°œì „ì˜ í•œê³„ 4ê°€ì§€ë¥¼ ê°ê° ì„œìˆ í•˜ì‹œì˜¤.", a: "ì •ë³´ í†µì‹  ê¸°ìˆ ì˜ í•œê³„: 1. ì •ë³´ ê³¼ë¶€í•˜, 2. ì¸í„°ë„· ì¤‘ë…, 3. ê°ì‹œ ì‚¬íšŒ, 4. ìœ¤ë¦¬ì  ê°ˆë“±.", id: "e-12" },
        { type: "essay", q: "í™˜ê²½ ë³´ì „ê³¼ ì¸ê°„ ì¤‘ì‹¬ì˜ ê°œë°œ ê¸ˆì§€ì— ëŒ€í•œ 'ì°¬ì„±' ì…ì¥ê³¼ 'ë°˜ëŒ€' ì…ì¥ì˜ ì£¼ëœ ê·¼ê±°ë¥¼ ê°ê° ì„œìˆ í•˜ì‹œì˜¤.", a: "ì°¬ì„±: ê°œë°œ ê³¼ì •ì—ì„œ í™˜ê²½ì´ íŒŒê´´ë˜ë¯€ë¡œ ë¬´ë¶„ë³„í•œ ê°œë°œì€ ì§€ì–‘í•´ì•¼ í•œë‹¤. ë°˜ëŒ€: ì €ê°œë°œ êµ­ê°€ë“¤ì€ ê°œë°œì„ í†µí•´ì„œ ê²½ì œ ì„±ì¥ì„ ì´ë£¨ì–´ì•¼ í•œë‹¤.", id: "e-13" },
        { type: "essay", q: "ê³¼í•™ ê¸°ìˆ ì˜ ì–‘ë©´ì„±ê³¼ ìš°ë¦¬ì˜ ìì„¸ë¥¼ ì„œìˆ í•˜ì‹œì˜¤.", a: "ì¸ê³µì§€ëŠ¥, ì •ë³´í†µì‹ ì˜ ë°œì „, ê³¼í•™ê¸°ìˆ ì˜ ë°œì „ ë“±ì€ ìœ ìš©í•˜ì§€ë§Œ, ê¸ì •ì , ë¶€ì •ì ì¸ ì¸¡ë©´ì´ ì¡´ì¬í•˜ì—¬ ë¬´ë¶„ë³„í•œ ê¸°ìˆ ì˜ ì•…ìš©ì„ ë§‰ëŠ” ìœ¤ë¦¬ì  ì§€ì¹¨ì„ ì„¸ìš°ê³  ê³¼í•™ê¸°ìˆ ì„ ì±…ì„ ìˆê²Œ í™œìš©í•´ì•¼ í•œë‹¤.", id: "e-14" },
        { type: "essay", q: "ì¸ê³µì§€ëŠ¥ ê¸°ìˆ  ë°œì „ì˜ ìœ ìš©ì„±ì„ ì„œìˆ í•˜ì‹œì˜¤.", a: "ì˜ë£Œ, êµí†µ, ì •ë³´ í†µì‹ , ì‚°ì—…, êµìœ¡ ë¶„ì•¼ ë“±ì— ë‹¤ì–‘í•œ ê¸°ìˆ ì´ ë„ì…ë˜ì–´ ìœ ìš©ì„±ì´ ì¦ëŒ€ëœë‹¤.", id: "e-15" },
        { type: "essay", q: "ì •ë³´ í†µì‹  ê¸°ìˆ  ë°œì „ì˜ ìœ ìš©ì„±ì„ 3ê°€ì§€ ì„œìˆ í•˜ì‹œì˜¤.", a: "ê¸€ë¡œë²Œ ë„¤íŠ¸ì›Œí‚¹ ê°•í™”, ì „ììƒê±°ë˜ í™œì„±í™”, ë””ì§€í„¸ ë¯¼ì¡±ì£¼ì˜.", id: "e-16" },
        { type: "essay", q: "ë§¤ì²´ ê¸°ìˆ  ë°œì „ì˜ ìœ ìš©ì„±ì„ 4ê°€ì§€ ì„œìˆ í•˜ì‹œì˜¤.", a: "ë‹¤ì–‘í•œ ë¬¸í™” êµë¥˜, ë””ì§€í„¸ ë§ˆì¼€íŒ…, ì‹œë¯¼ ì €ë„ë¦¬ì¦˜, ë‹¤ì–‘í•œ ì½˜í…ì¸  ì œê³µ.", id: "e-17" },
        { type: "essay", q: "ë§¤ì²´ ê¸°ìˆ  ë°œì „ì˜ í•œê³„ë¥¼ 4ê°€ì§€ ì„œìˆ í•˜ì‹œì˜¤.", a: "ê°€ì§œ ë‰´ìŠ¤, ì‚¬íšŒì  ê³ ë¦½, ë¬¸í™” ìƒì—…í™”, ì„¸ëŒ€ ê°„ ì •ë³´ ê²©ì°¨ ë°œìƒ.", id: "e-18" }
    ];

    // --- ë§ˆìŠ¤í„° ì„œìˆ í˜• ë¬¸ì œ ë°ì´í„° (ìˆ˜ì •ë¨) ---
    // criteriaì˜ textëŠ” ì´ì œ "í‚¤ì›Œë“œ"ì´ì "ì±„ì  ê¸°ì¤€ í…ìŠ¤íŠ¸" ì—­í• ì„ í•©ë‹ˆë‹¤.
    const masterEssayQuizData = [
        { type: "master_essay", q: "êµí†µ ê¸°ìˆ ì´ ë¬´ì—‡ì¸ì§€ ì„œìˆ í•˜ì‹œì˜¤.", a: "ë©€ë¦¬ ë–¨ì–´ì§„ ê³³ê¹Œì§€ ë¹ ë¥´ê²Œ ì´ë™ì‹œì¼œì£¼ëŠ” ê¸°ìˆ ì´ë‹¤.", id: "me-1", 
          criteria: [ {text: "ì‹œì¼œì£¼ëŠ” ê¸°ìˆ ì´ë‹¤.", score: 10}, {text: "ë©€ë¦¬ ë–¨ì–´ì§„ ê³³ê¹Œì§€ ë¹ ë¥´ê²Œ ì´ë™", score: 90} ] },
        { type: "master_essay", q: "ì •ë³´ í†µì‹  ê¸°ìˆ ì´ ë¬´ì—‡ì¸ì§€ ì„œìˆ í•˜ì‹œì˜¤.", a: "íœ´ëŒ€ ì „í™” ë° ì „ì ê¸°ê¸°ë¥¼ ì´ìš©í•˜ì—¬ ì‹œê°„ê³¼ ì¥ì†Œì— êµ¬ì• ë°›ì§€ ì•Šê³  ì •ë³´ë¥¼ ì‰½ê²Œ ì²˜ë¦¬í•˜ê³  ì˜ì‚¬ ì†Œí†µì´ ê°€ëŠ¥í•˜ê²Œ í•´ì£¼ëŠ” ê¸°ìˆ ì´ë‹¤.", id: "me-2", 
          criteria: [ {text: "ê°€ëŠ¥í•˜ê²Œ í•´ì£¼ëŠ” ê¸°ìˆ ì´ë‹¤.", score: 10}, {text: "ì‹œê°„ê³¼ ì¥ì†Œì— êµ¬ì• ë°›ì§€ ì•Šê³  ì •ë³´ë¥¼ ì‰½ê²Œ ì²˜ë¦¬í•˜ê³  ì˜ì‚¬ ì†Œí†µ", score: 90} ] },
        { type: "master_essay", q: "ì‹ ì¬ìƒì—ë„ˆì§€ ê¸°ìˆ ì´ ë¬´ì—‡ì¸ì§€ ì„œìˆ í•˜ì‹œì˜¤.", a: "ì§€ì† ê°€ëŠ¥í•œ ë°œì „ê³¼ ì§€êµ¬ í™˜ê²½ ë¬¸ì œ í•´ê²°ê³¼ ë„ì›€ì„ ì£¼ëŠ” ê¸°ìˆ ì´ë‹¤.", id: "me-3", 
          criteria: [ {text: "ë„ì›€ì„ ì£¼ëŠ” ê¸°ìˆ ì´ë‹¤.", score: 10}, {text: "ì§€ì† ê°€ëŠ¥í•œ ë°œì „ê³¼ ì§€êµ¬ í™˜ê²½ ë¬¸ì œ í•´ê²°", score: 90} ] },
        { type: "master_essay", q: "ë†ì—… ê¸°ìˆ ì´ ë¬´ì—‡ì¸ì§€ ì„œìˆ í•˜ì‹œì˜¤.", a: "ì‹ëŸ‰ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ê¸°ìˆ ì´ë‹¤.", id: "me-4", 
          criteria: [ {text: "í•´ê²°í•˜ëŠ” ê¸°ìˆ ì´ë‹¤.", score: 10}, {text: "ì‹ëŸ‰ ë¬¸ì œë¥¼", score: 90} ] },
        { type: "master_essay", q: "ì˜í•™ ê¸°ìˆ ì´ ë¬´ì—‡ì¸ì§€ ì„œìˆ í•˜ì‹œì˜¤.", a: "ì¸ê°„ì˜ ì§ˆë³‘ì—ì„œ ë²—ì–´ë‚˜ ê±´ê°•í•œ ì‚¶ì„ ìœ ì§€í•˜ê²Œ í•´ì£¼ëŠ” ê¸°ìˆ ì´ë‹¤.", id: "me-5", 
          criteria: [ {text: "ìœ ì§€í•˜ê²Œ í•´ì£¼ëŠ” ê¸°ìˆ ì´ë‹¤.", score: 10}, {text: "ì¸ê°„ì˜ ì§ˆë³‘ì—ì„œ ë²—ì–´ë‚˜ ê±´ê°•í•œ ì‚¶", score: 90} ] },
        { type: "master_essay", q: "ì¸ê³µì§€ëŠ¥ ë¡œë´‡ì´ ë¬´ì—‡ì¸ì§€ ì„œìˆ í•˜ì‹œì˜¤.", a: "ì¸ê³µì§€ëŠ¥ ê¸°ìˆ ì„ í™œìš©í•´ ìƒí™©ì„ ìŠ¤ìŠ¤ë¡œ íŒë‹¨í•˜ë©° ììœ¨ì ìœ¼ë¡œ ì›€ì§ì´ëŠ” ë¡œë´‡ì´ë©°, ì„¼ì„œì™€ ì •ë³´ë¥¼ ì£¼ê³ ë°›ìœ¼ë©° í•™ìŠµí•˜ëŠ” ë¡œë´‡ì´ë‹¤.", id: "me-6", 
          criteria: [ {text: "ì›€ì§ì´ëŠ” ë¡œë´‡ì´ë©°", score: 10}, {text: "ì¸ê³µì§€ëŠ¥ ê¸°ìˆ ì„ í™œìš©í•´ ìƒí™©ì„ ìŠ¤ìŠ¤ë¡œ íŒë‹¨í•˜ë©° ììœ¨ì ìœ¼ë¡œ", score: 90} ] },
        { type: "master_essay", q: "ì‚¬ë¬¼ ì¸í„°ë„· ê¸°ìˆ ì´ ë¬´ì—‡ì¸ì§€ ì„œìˆ í•˜ê³ , ì•½ìë¥¼ ì„œìˆ í•˜ì‹œì˜¤.", a: "ì‚¬ë¬¼ ì¸í„°ë„·ì˜ ì•½ìëŠ” Internet of Thingsì´ë©°, ì‚¬ë¬¼ì— ì„¼ì„œì™€ í†µì‹  ê¸°ìˆ ì„ ë‚´ì¥í•˜ê³  ì¸í„°ë„·ì— ì—°ê²°í•˜ì—¬ ì •ë³´ë¥¼ ì „ì†¡í•˜ê³  í†µì‹ í•˜ëŠ” ê¸°ìˆ ì´ë‹¤.", id: "me-7", 
          criteria: [ {text: "Internet of Thingsì´ë©°", score: 10}, {text: "ì‚¬ë¬¼ì— ì„¼ì„œì™€ í†µì‹  ê¸°ìˆ ì„ ë‚´ì¥í•˜ê³  ì¸í„°ë„·ì— ì—°ê²°í•˜ì—¬ ì •ë³´ë¥¼ ì „ì†¡í•˜ê³  í†µì‹ ", score: 90} ] },
        { type: "master_essay", q: "ìŠ¤ë§ˆíŠ¸íŒœì—ì„œ ì‚¬ë¬¼ ì¸í„°ë„· ê¸°ìˆ ì´ ì–´ë–»ê²Œ ì ìš©ë˜ëŠ”ì§€ ì„œìˆ í•˜ì‹œì˜¤.", a: "í† ì–‘ ì„¼ì„œë¥¼ ì´ìš©í•˜ì—¬ ìˆ˜ë¶„ëŸ‰, pH ë†ë„, ì˜¨ë„ ë“±ì„ ì¸¡ì •í•˜ê³ , ê¸°ìƒ ì„¼ì„œëŠ” ì˜¨ë„, ìŠµë„, ì¼ì‚¬ëŸ‰, ê°•ìš° ë“±ì„ ëª¨ë‹ˆí„°ë§í•¨.\nìë™ ê´€ê°œ ì‹œìŠ¤í…œì„ ì´ìš©í•˜ì—¬ í•„ìš”í•œ ì–‘ì˜ ìˆ˜ë¶„ì„ ê³µê¸‰í•˜ê³ , ì‘ë¬¼ì˜ ì˜ì–‘ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³  í•„ìš”í•œ ë¹„ë£Œì™€ ì˜ì–‘ì†Œë¥¼ ê³µê¸‰í•¨.", id: "me-8", 
          criteria: [ {text: "í† ì–‘ ì„¼ì„œë¥¼ ì´ìš©í•˜ì—¬", score: 50}, {text: "ìë™ ê´€ê°œ ì‹œìŠ¤í…œì„ ì´ìš©í•˜ì—¬", score: 50} ] },
        { type: "master_essay", q: "ì—°êµ¬ ìœ¤ë¦¬ ì¤‘ ì •ì§ì„±ê³¼ ê°œë°©ì„±ì— ëŒ€í•´ ì„œìˆ í•˜ì‹œì˜¤.", a: "ì—°êµ¬ ì ˆì°¨ì™€ ê²°ê³¼ë¥¼ ì¡°ì‘í•˜ê±°ë‚˜ ê±°ì§“ìœ¼ë¡œ ë§Œë“¤ì–´ ë‚´ì§€ ì•ŠëŠ”ë‹¤. ë˜ í•™ë¬¸ ë°œì „ì„ ìœ„í•´ ì—°êµ¬ ë‚´ìš©ì„ ê³µê°œí•œë‹¤.", id: "me-9", 
          criteria: [ {text: "ì¡°ì‘í•˜ê±°ë‚˜ ê±°ì§“ìœ¼ë¡œ ë§Œë“¤ì–´ ë‚´ì§€ ì•ŠëŠ”ë‹¤", score: 50}, {text: "ì—°êµ¬ ë‚´ìš©ì„ ê³µê°œí•œë‹¤", score: 50} ] },
        { type: "master_essay", q: "ì—°êµ¬ ìœ¤ë¦¬ ì¤‘ ì§€ì‹ ì¬ì‚°ê¶Œ ì¡´ì¤‘ì— ëŒ€í•´ ì„œìˆ í•˜ì‹œì˜¤.", a: "ë‹¤ë¥¸ ê³¼í•™ìì˜ ì—°êµ¬ ê²°ê³¼ë¥¼ í•¨ë¶€ë¡œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.", id: "me-10", 
          criteria: [ {text: "ë‹¤ë¥¸ ê³¼í•™ìì˜ ì—°êµ¬ ê²°ê³¼ë¥¼", score: 50}, {text: "í•¨ë¶€ë¡œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤", score: 50} ] },
        { type: "master_essay", q: "ì—°êµ¬ ìœ¤ë¦¬ ì¤‘ ìƒí˜¸ ì¡´ì¤‘ì— ëŒ€í•´ ì„œìˆ í•˜ì‹œì˜¤.", a: "í•¨ê»˜ ì—°êµ¬í•˜ëŠ” ë™ë£Œë“¤ì„ ì¡´ì¤‘í•˜ê³ , ì—°êµ¬ ì°¸ì—¬ìë“¤ì˜ ì„±ê³¼ë¥¼ ê³µì •í•˜ê²Œ ë‚˜ëˆˆë‹¤.", id: "me-11", 
          criteria: [ {text: "í•¨ê»˜ ì—°êµ¬í•˜ëŠ” ë™ë£Œë“¤ì„ ì¡´ì¤‘", score: 50}, {text: "ì„±ê³¼ë¥¼ ê³µì •í•˜ê²Œ ë‚˜ëˆˆë‹¤", score: 50} ] },
        { type: "master_essay", q: "ì—°êµ¬ ìœ¤ë¦¬ ì¤‘ ì‹¤í—˜ ëŒ€ìƒì— ëŒ€í•œ ì¡´ì¤‘ì— ëŒ€í•´ ì„œìˆ í•˜ì‹œì˜¤.", a: "ì‹¤í—˜ ëŒ€ìƒì„ ìœ¤ë¦¬ì ìœ¼ë¡œ ëŒ€í•˜ì—¬ ì‹¤í—˜ ëŒ€ìƒì˜ ìƒëª…ê³¼ ì¡´ì—„ì„±ì„ ì¡´ì¤‘í•œë‹¤.", id: "me-12", 
          criteria: [ {text: "ì‹¤í—˜ ëŒ€ìƒì„ ìœ¤ë¦¬ì ìœ¼ë¡œ ëŒ€í•˜ì—¬", score: 50}, {text: "ìƒëª…ê³¼ ì¡´ì—„ì„±ì„ ì¡´ì¤‘í•œë‹¤", score: 50} ] },
        { type: "master_essay", q: "ì—°êµ¬ ìœ¤ë¦¬ ì¤‘ ì‚¬íšŒì  ì±…ì„ì— ëŒ€í•´ ì„œìˆ í•˜ì‹œì˜¤.", a: "ì‚¬íšŒì— ì•…ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ì—°êµ¬ëŠ” í”¼í•˜ê³ , ê³µê³µì˜ ì´ìµì„ ìœ„í•´ ë…¸ë ¥í•œë‹¤.", id: "me-13", 
          criteria: [ {text: "ì‚¬íšŒì— ì•…ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ì—°êµ¬ëŠ” í”¼í•˜ê³ ", score: 50}, {text: "ê³µê³µì˜ ì´ìµì„ ìœ„í•´ ë…¸ë ¥í•œë‹¤", score: 50} ] }
    ];
    // --- ë§ˆìŠ¤í„° ì„œìˆ í˜• ë¬¸ì œ ë°ì´í„° ë ---

    let shortQuizData = [];
    let essayQuizData = [];
    let masterEssayQuizDataShuffled = []; // ë§ˆìŠ¤í„° ì„œìˆ í˜• ì…”í”Œ ëª©ë¡

    // --- ì˜¤ë‹µ ë…¸íŠ¸ ìƒíƒœ ê´€ë¦¬ ---
    let shortIncorrect = []; 
    let essayIncorrect = [];
    let masterEssayIncorrect = []; // ë§ˆìŠ¤í„° ì„œìˆ í˜• ì˜¤ë‹µ ëª©ë¡
    let reviewShuffled = [];

    // --- í€´ì¦ˆ ìƒíƒœ ê´€ë¦¬ ---
    let currentMode = 'short'; // í˜„ì¬ ëª¨ë“œ: 'short', 'essay', 'master_essay', 'review'
    const quizState = {
        short: { index: 0, score: 0, shuffled: [] },
        essay: { index: 0, score: 0, shuffled: [] },
        master_essay: { index: 0, score: 0, shuffled: [] }, // ìƒˆë¡œìš´ ìƒíƒœ ì¶”ê°€
        review: { index: 0, score: 0, total: 0 }
    };

    let isAnswerChecked = false; // ì •ë‹µ í™•ì¸ ìƒíƒœ í”Œë˜ê·¸

    // --- ë¬¸ì œ ë°ì´í„° ì´ˆê¸°í™” ë° ìƒì„± ---
    function initializeQuizData() {
        // ë¬¸ì œ ë°ì´í„° ë¶„ë¥˜
        shortQuizData = sourceQuizData.filter(q => q.type === 'short');
        essayQuizData = sourceQuizData.filter(q => q.type === 'essay');

        // ì´ˆê¸° ì…”í”Œ: ë°°ì—´ ë³µì‚¬ë³¸ì„ ì„ì–´ì„œ ì‚¬ìš©í•˜ë¯€ë¡œ ì¤‘ë³µ ì¶œì œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
        quizState.short.shuffled = shuffleArray([...shortQuizData]);
        quizState.essay.shuffled = shuffleArray([...essayQuizData]);
        quizState.master_essay.shuffled = shuffleArray([...masterEssayQuizData]); // ë§ˆìŠ¤í„° ì„œìˆ í˜• ì…”í”Œ

        updateReviewCount();
    }

    // Fisher-Yates ì…”í”Œ ì•Œê³ ë¦¬ì¦˜ (ì¤‘ë³µ ì—†ëŠ” ì„ê¸°)
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    // ì˜¤ë‹µ ë…¸íŠ¸ íƒ­ì˜ ë¬¸ì œ ê°œìˆ˜ ì—…ë°ì´íŠ¸
    function updateReviewCount() {
        const totalIncorrect = shortIncorrect.length + essayIncorrect.length + masterEssayIncorrect.length; // ë§ˆìŠ¤í„° ì„œìˆ í˜• í¬í•¨
        document.getElementById('review-tab-btn').textContent = `ì˜¤ë‹µ ë…¸íŠ¸ (${totalIncorrect})`;
        quizState.review.total = totalIncorrect;
    }

    // ì˜¤ë‹µ ë…¸íŠ¸ ë°°ì—´ì— ë¬¸ì œê°€ ì´ë¯¸ ìˆëŠ”ì§€ í™•ì¸
    function isAlreadyIncorrect(question) {
        const incorrectArray = 
            question.type === 'short' ? shortIncorrect : 
            question.type === 'essay' ? essayIncorrect : 
            masterEssayIncorrect;
        return incorrectArray.some(q => q.id === question.id);
    }

    // ì˜¤ë‹µ ë…¸íŠ¸ ë°°ì—´ì—ì„œ ë¬¸ì œ ì œê±° (ì˜¤ë‹µ ì¬í’€ì´ ì‹œ ì •ë‹µ ë§ì·„ì„ ë•Œ)
    function removeIncorrect(question) {
        if (question.type === 'short') {
            shortIncorrect = shortIncorrect.filter(q => q.id !== question.id);
        } else if (question.type === 'essay') {
            essayIncorrect = essayIncorrect.filter(q => q.id !== question.id);
        } else if (question.type === 'master_essay') {
             masterEssayIncorrect = masterEssayIncorrect.filter(q => q.id !== question.id);
        }
        updateReviewCount();
    }

    // --- íƒ­ ëª¨ë“œ ë³€ê²½ ---
    function setMode(mode) {
        // í˜„ì¬ ëª¨ë“œì™€ ê°™ìœ¼ë©´ í•¨ìˆ˜ ì‹¤í–‰ ì¤‘ì§€
        if (currentMode === mode) return; 

        currentMode = mode;
        
        // íƒ­ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ë³€ê²½
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        document.getElementById(`${mode}-tab-btn`).classList.add('active');

        // ì˜¤ë‹µ ë…¸íŠ¸ ëª¨ë“œ ì‹œì‘ ì‹œ ì¤€ë¹„
        if (mode === 'review') {
            startReviewMode();
            return;
        }

        // í€´ì¦ˆ ìƒíƒœ ì´ˆê¸°í™” ë° ë¡œë“œ
        loadQuestion();
        document.getElementById('final-score').style.display = 'none';
        document.getElementById('quiz-area').style.display = 'block';
        document.getElementById('control-panel').style.display = 'flex';
    }
    
    // ì˜¤ë‹µ ë…¸íŠ¸ ëª¨ë“œ ì„¤ì •
    function startReviewMode() {
        if (quizState.review.total === 0) {
            document.getElementById('quiz-status').textContent = 'ì˜¤ë‹µ ë…¸íŠ¸ê°€ ë¹„ì–´ìˆì–´! ë©”ì¸ í€´ì¦ˆì—ì„œ í‹€ë¦° ë¬¸ì œë¥¼ ë¨¼ì € ë§Œë“¤ì–´ ë´.';
            document.getElementById('question-text').textContent = 'ë¬¸ì œê°€ ì—†ì–´!';
            document.getElementById('answer-input').style.display = 'none';
            document.getElementById('multi-answer-input-container').style.display = 'none';
            document.getElementById('essay-input-area').style.display = 'none';
            document.getElementById('master-essay-guide').style.display = 'none'; // ê°€ì´ë“œ ìˆ¨ê¹€
            document.getElementById('check-button').style.display = 'none';
            document.getElementById('next-button').style.display = 'none';
            document.getElementById('result-text').textContent = '';
            document.getElementById('quiz-area').style.display = 'block';
            document.getElementById('final-score').style.display = 'none';
            return;
        }

        // ì˜¤ë‹µ ë¬¸ì œë¥¼ ëª¨ì•„ì„œ ì„ìŒ
        const combinedIncorrect = [...shortIncorrect, ...essayIncorrect, ...masterEssayIncorrect];
        reviewShuffled = shuffleArray(combinedIncorrect);
        
        quizState.review.index = 0; 
        quizState.review.score = 0;

        document.getElementById('quiz-area').style.display = 'block';
        document.getElementById('final-score').style.display = 'none';
        document.getElementById('control-panel').style.display = 'flex';
        loadQuestion();
    }

    // --- í€´ì¦ˆ ë¡œë“œ ---
    function loadQuestion() {
        const state = quizState[currentMode];
        let currentQuestion, totalQuestions;

        // í˜„ì¬ ëª¨ë“œì— ë”°ë¼ ë¬¸ì œ ë°°ì—´ ì„¤ì •
        let quizArray;
        let typeDisplayName;
        if (currentMode === 'short') {
            quizArray = state.shuffled;
            typeDisplayName = 'ë‹¨ë‹µí˜•';
        } else if (currentMode === 'essay') {
            quizArray = state.shuffled;
            typeDisplayName = 'ì„œìˆ í˜•';
        } else if (currentMode === 'master_essay') {
            quizArray = state.shuffled;
            typeDisplayName = 'ë§ˆìŠ¤í„° ì„œìˆ í˜•';
        } else if (currentMode === 'review') {
            quizArray = reviewShuffled;
        }

        // ë¬¸ì œ ì¢…ë£Œ í™•ì¸
        totalQuestions = quizArray.length;
        if (state.index >= totalQuestions) {
            showFinalScore();
            return;
        }
        currentQuestion = quizArray[state.index];

        // ìƒíƒœ í‘œì‹œ ì—…ë°ì´íŠ¸
        if (currentMode === 'review') {
            const reviewType = currentQuestion.type === 'short' ? 'ë‹¨ë‹µí˜•' : (currentQuestion.type === 'essay' ? 'ì„œìˆ í˜•' : 'ë§ˆìŠ¤í„° ì„œìˆ í˜•');
            document.getElementById('quiz-status').textContent = 
                `ì˜¤ë‹µ ë…¸íŠ¸ ë¬¸ì œ ${state.index + 1} / ${totalQuestions} (${reviewType}, ë§ì¶˜ ê°œìˆ˜: ${state.score}ê°œ)`;
        } else {
            // ë§ˆìŠ¤í„° ì„œìˆ í˜•ì€ ì´ íšë“ ì ìˆ˜ë¥¼ í‘œì‹œ
            const scoreUnit = currentMode === 'master_essay' ? 'ì ' : 'ê°œ';
            document.getElementById('quiz-status').textContent = 
                `${typeDisplayName} ë¬¸ì œ ${state.index + 1} / ${totalQuestions} (í˜„ì¬ ì ìˆ˜: ${state.score}${scoreUnit})`;
        }
        
        // ë¬¸ì œ ë‚´ìš© ì—…ë°ì´íŠ¸
        const qType = currentQuestion.type === 'short' ? 'ë‹¨ë‹µí˜•' : (currentQuestion.type === 'essay' ? 'ì„œìˆ í˜•' : 'ë§ˆìŠ¤í„° ì„œìˆ í˜•');
        document.getElementById('question-text').textContent = 
            `[${qType}] ${currentQuestion.q}`;
        
        // ì…ë ¥/ê²°ê³¼ ì´ˆê¸°í™”
        document.getElementById('result-text').textContent = '';
        document.getElementById('result-text').className = 'result';
        document.getElementById('answer-input').value = '';
        document.getElementById('essay-user-answer').value = '';
        document.getElementById('essay-answer-box').style.display = 'none';
        document.getElementById('master-essay-answer-box').style.display = 'none'; // ë§ˆìŠ¤í„° ì„œìˆ í˜• ë°•ìŠ¤ ìˆ¨ê¹€


        // --- ì…ë ¥ í•„ë“œ í‘œì‹œ/ìˆ¨ê¹€ ë° ë™ì  ìƒì„± ë¡œì§ ---
        const isShortQuestion = currentQuestion.type === 'short';
        const isMasterEssay = currentQuestion.type === 'master_essay' || (currentMode === 'review' && currentQuestion.type === 'master_essay');
        // num_reqê°€ ìˆê³ , ë‹µë³€ì´ ë°°ì—´ì¸ ê²½ìš° ë‹¤ì¤‘ ì •ë‹µìœ¼ë¡œ ê°„ì£¼
        const isMultiAnswerShort = isShortQuestion && currentQuestion.num_req && Array.isArray(currentQuestion.a); 

        const singleInput = document.getElementById('answer-input');
        const multiContainer = document.getElementById('multi-answer-input-container');
        const essayArea = document.getElementById('essay-input-area');
        const masterGuide = document.getElementById('master-essay-guide');


        // 1. ëª¨ë“  ì…ë ¥ í•„ë“œ ì´ˆê¸° ìˆ¨ê¹€ ë° ë™ì  í•„ë“œ ì œê±°
        singleInput.style.display = 'none';
        multiContainer.style.display = 'none';
        essayArea.style.display = 'none';
        masterGuide.style.display = 'none'; // ê°€ì´ë“œ ìˆ¨ê¹€
        
        multiContainer.querySelectorAll('.multi-answer-input').forEach(input => input.remove());

        // 2. ë¬¸ì œ ìœ í˜•ì— ë”°ë¼ ì ì ˆí•œ í•„ë“œ í‘œì‹œ ë° ë™ì  ìƒì„±
        if (isMultiAnswerShort) {
            multiContainer.style.display = 'flex';
            const requiredCount = currentQuestion.num_req;
            document.getElementById('multi-answer-guide').textContent = 
                `ìš”êµ¬ ê°œìˆ˜: ìµœì†Œ ${requiredCount}ê°œ ì´ìƒ (ìˆœì„œ ë¬´ê´€)`;

            // ìš”êµ¬ ê°œìˆ˜(requiredCount)ë§Œí¼ ì…ë ¥ í•„ë“œ ë™ì  ìƒì„±
            for (let i = 0; i < requiredCount; i++) {
                const input = document.createElement('input');
                input.type = 'text';
                input.className = 'multi-answer-input'; 
                input.placeholder = `ë‹µë³€ ${i + 1}`;
                multiContainer.appendChild(input);
            }
            
        } else if (isShortQuestion) { // ë‹¨ì¼ ë‹µ ë‹¨ë‹µí˜•
            singleInput.style.display = 'block';
            singleInput.disabled = false;
        } else { // ì„œìˆ í˜• (essay ë˜ëŠ” master_essay)
            essayArea.style.display = 'block';
            document.getElementById('essay-user-answer').disabled = false;
        }
        
        // 3. ë§ˆìŠ¤í„° ì„œìˆ í˜•ì˜ ê²½ìš° ì±„ì  ê¸°ì¤€ ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ
        if (isMasterEssay && currentQuestion.criteria) {
            masterGuide.style.display = 'block';
            const previewList = document.getElementById('master-essay-criteria-preview');
            previewList.innerHTML = '';
            
            let totalScore = 0;
            currentQuestion.criteria.forEach((criterion, index) => {
                totalScore += criterion.score;
                const li = document.createElement('li');
                // ì‹¤ì œ ì±„ì ì— ì‚¬ìš©ë˜ëŠ” í‚¤ì›Œë“œ(criterion.text)ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.
                li.textContent = `(${criterion.score}ì ) - ${criterion.text}`;
                previewList.appendChild(li);
            });
            document.getElementById('master-total-score-display').textContent = totalScore;
        }
        // --- ì…ë ¥ í•„ë“œ í‘œì‹œ/ìˆ¨ê¹€ ë° ë™ì  ìƒì„± ë¡œì§ ë ---


        // ë²„íŠ¼ ë° ìƒíƒœ ì´ˆê¸°í™”
        document.getElementById('check-button').style.display = 'inline-block';
        document.getElementById('check-button').disabled = false;
        document.getElementById('next-button').style.display = 'none';
        
        const essayButtons = document.getElementById('essay-score-buttons');
        if (essayButtons) essayButtons.style.display = 'block';
        
        isAnswerChecked = false;
        
        // ë‹¤ìŒ ë¬¸ì œ ë¡œë“œ ì‹œ ì…ë ¥ í•„ë“œì— ë°”ë¡œ í¬ì»¤ìŠ¤
        setTimeout(() => {
            let inputField;
            if (isMultiAnswerShort) {
                 inputField = multiContainer.querySelector('.multi-answer-input'); 
            } else if (isShortQuestion) {
                 inputField = document.getElementById('answer-input');
            } else { // essay or master_essay
                 inputField = document.getElementById('essay-user-answer');
            }
            
            if (document.activeElement) {
                document.activeElement.blur();
            }
            
            if (inputField && inputField.style.display !== 'none') {
                 inputField.focus();
            }
        }, 0); 
    }

    // --- ì •ë‹µ í™•ì¸ í•¸ë“¤ëŸ¬ ---
    function handleCheck() {
        if (isAnswerChecked) return;
        
        // í˜„ì¬ ë¬¸ì œ ê°€ì ¸ì˜¤ê¸°
        const currentQuestion = currentMode === 'review' 
            ? reviewShuffled[quizState.review.index] 
            : quizState[currentMode].shuffled[quizState[currentMode].index];

        if (currentQuestion.type === 'short') {
            checkShortAnswer(currentQuestion);
        } else if (currentQuestion.type === 'essay') { 
            showEssayAnswer(currentQuestion);
        } else if (currentQuestion.type === 'master_essay') {
            checkMasterEssayAnswer(currentQuestion); // ë§ˆìŠ¤í„° ì„œìˆ í˜• ìë™ ì±„ì  í˜¸ì¶œ
        }
    }

    // ë‹¨ë‹µí˜• ìë™ ì±„ì  (ê¸°ì¡´ ë¡œì§ ìœ ì§€)
    function checkShortAnswer(currentQuestion) {
        const state = quizState[currentMode];
        const resultText = document.getElementById('result-text');
        
        const isMultiAnswer = currentQuestion.num_req && Array.isArray(currentQuestion.a);

        let isCorrect = false;
        let feedbackMessage = '';
        let allCorrectAnswersDisplay;

        if (isMultiAnswer) {
            // --- ë‹¤ì¤‘ ì •ë‹µ ì²˜ë¦¬ ë¡œì§ ---
            const multiInputs = document.querySelectorAll('#multi-answer-input-container .multi-answer-input');
            const userAnswers = [];
            const requiredCount = currentQuestion.num_req;

            multiInputs.forEach(input => {
                const normalized = input.value.replace(/\s/g, '').toLowerCase();
                if (normalized) {
                    userAnswers.push(normalized);
                }
                input.disabled = true;
            });

            const allCorrectAnswersNormalized = currentQuestion.a.map(a => String(a).replace(/\s/g, '').toLowerCase());
            allCorrectAnswersDisplay = currentQuestion.a.join(', ');

            let correctCount = 0;
            const matchedInputs = [];
            
            userAnswers.forEach(userA => {
                if (allCorrectAnswersNormalized.includes(userA) && !matchedInputs.includes(userA)) {
                    correctCount++;
                    matchedInputs.push(userA);
                }
            });

            isCorrect = (correctCount >= requiredCount);
            
            feedbackMessage = `${currentQuestion.a.length}ê°œì˜ ì •ë‹µ í›„ë³´ ì¤‘ **${correctCount}ê°œ** ì •ë‹µ`;
            if (requiredCount > 0) {
                 feedbackMessage += ` (ìš”êµ¬ ê°œìˆ˜: ${requiredCount}ê°œ)`;
            }
            if (!isCorrect) {
                feedbackMessage += `<br/>**ì •ë‹µ ë¦¬ìŠ¤íŠ¸**: ${allCorrectAnswersDisplay}`;
            }

        } else {
            // --- ë‹¨ì¼ ì •ë‹µ ì²˜ë¦¬ ë¡œì§ ---
            const userAnswer = document.getElementById('answer-input').value.replace(/\s/g, '').toLowerCase();
            
            let correctAnswer;
            if (Array.isArray(currentQuestion.a)) {
                const normalizedAnswers = currentQuestion.a.map(a => String(a).replace(/\s/g, '').toLowerCase());
                isCorrect = normalizedAnswers.includes(userAnswer);
                allCorrectAnswersDisplay = currentQuestion.a.join(', ');
            } else {
                correctAnswer = String(currentQuestion.a).replace(/\s/g, '').toLowerCase();
                isCorrect = (userAnswer === correctAnswer);
                allCorrectAnswersDisplay = currentQuestion.a; 
            }
            
            if (!isCorrect) {
                feedbackMessage = `ì˜¤ë‹µì…ë‹ˆë‹¤! ì •ë‹µ: ${allCorrectAnswersDisplay}`;
            }
            document.getElementById('answer-input').disabled = true;
        }


        if (isCorrect) {
            resultText.innerHTML = isMultiAnswer ? `**ì •ë‹µì…ë‹ˆë‹¤!** <br/> ${feedbackMessage}` : 'ì •ë‹µì…ë‹ˆë‹¤!';
            resultText.classList.add('correct');
            if (currentMode !== 'review') state.score++;
        } else {
            resultText.innerHTML = isMultiAnswer ? `**ì˜¤ë‹µì…ë‹ˆë‹¤!** <br/> ${feedbackMessage}` : feedbackMessage;
            resultText.classList.add('incorrect');
            if (currentMode !== 'review' && !isAlreadyIncorrect(currentQuestion)) {
                shortIncorrect.push(currentQuestion);
                updateReviewCount();
            }
        }
        
        if (currentMode === 'review' && isCorrect) {
            removeIncorrect(currentQuestion);
            state.score++;
        }

        transitionToNextState(true);
    }

    // ì„œìˆ í˜• ëª¨ë²” ë‹µì•ˆ í‘œì‹œ (ìê°€ ì±„ì  ì‹œì‘) - ê¸°ì¡´ ì„œìˆ í˜•
    function showEssayAnswer(currentQuestion) {
        document.getElementById('essay-user-answer').disabled = true;
        
        const answerBox = document.getElementById('essay-answer-box');
        answerBox.style.display = 'block';
        document.getElementById('master-essay-answer-box').style.display = 'none'; // ë§ˆìŠ¤í„° ì„œìˆ í˜• ìˆ¨ê¹€
        document.getElementById('master-essay-guide').style.display = 'none'; // ê°€ì´ë“œ ìˆ¨ê¹€

        document.getElementById('essay-correct-answer').textContent = currentQuestion.a;

        const resultText = document.getElementById('result-text');
        resultText.textContent = 'ëª¨ë²” ë‹µì•ˆê³¼ ë¹„êµ í›„ ì •ë‹µ ì—¬ë¶€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.';
        resultText.className = 'result';

        document.getElementById('check-button').disabled = true;
    }

    // ë§ˆìŠ¤í„° ì„œìˆ í˜• ìë™ ì±„ì  ë° ê²°ê³¼ í‘œì‹œ - ìƒˆë¡œ ìˆ˜ì •ëœ ë¡œì§
    function checkMasterEssayAnswer(currentQuestion) {
        document.getElementById('essay-user-answer').disabled = true;
        const userAnswer = document.getElementById('essay-user-answer').value.replace(/\s/g, '').toLowerCase();
        
        const masterAnswerBox = document.getElementById('master-essay-answer-box');
        masterAnswerBox.style.display = 'block';
        document.getElementById('essay-answer-box').style.display = 'none';
        document.getElementById('master-essay-guide').style.display = 'none'; // ê°€ì´ë“œ ìˆ¨ê¹€

        document.getElementById('master-essay-correct-answer').textContent = currentQuestion.a;
        
        const criteriaList = document.getElementById('master-essay-criteria-list');
        criteriaList.innerHTML = '';
        
        let totalScore = 0;
        let earnedScore = 0;

        // 1. ì±„ì  ê¸°ì¤€ë³„ ì ìˆ˜ ê³„ì‚°
        currentQuestion.criteria.forEach((criterion, index) => {
            totalScore += criterion.score;
            
            // í‚¤ì›Œë“œ ì •ê·œí™”
            const keyword = criterion.text.replace(/\s/g, '').toLowerCase();
            
            // ì‚¬ìš©ìì˜ ë‹µì•ˆì— í‚¤ì›Œë“œê°€ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
            const isAchieved = userAnswer.includes(keyword);

            if (isAchieved) {
                earnedScore += criterion.score;
            }

            // UI ì—…ë°ì´íŠ¸
            const criteriaDiv = document.createElement('div');
            criteriaDiv.id = `criteria-item-${index}`;
            
            let statusText = isAchieved ? `O (íšë“: ${criterion.score}ì )` : `X (ë¯¸íšë“: 0ì )`;
            criteriaDiv.innerHTML = `
                <span class="master-score-text ${isAchieved ? 'achieved' : ''}">${criterion.score}ì : ${criterion.text}</span>
                <span style="font-weight: bold; color: ${isAchieved ? '#85e085' : '#ff8a80'};">${statusText}</span>
            `;
            criteriaList.appendChild(criteriaDiv);
        });

        document.getElementById('max-master-score').textContent = totalScore;
        document.getElementById('current-master-score').textContent = earnedScore;

        const resultText = document.getElementById('result-text');
        const state = quizState[currentMode];
        let isCorrect = (earnedScore === totalScore);
        
        // 2. ìµœì¢… ê²°ê³¼ ë©”ì‹œì§€ ë° ì ìˆ˜/ì˜¤ë‹µ ë…¸íŠ¸ ì²˜ë¦¬
        if (isCorrect) {
            resultText.innerHTML = `**ë§Œì ì…ë‹ˆë‹¤!** (${earnedScore}/${totalScore}ì ) ğŸ‰`;
            resultText.className = 'result correct';
            if (currentMode !== 'review') state.score += earnedScore;
            if (currentMode === 'review') removeIncorrect(currentQuestion);

        } else if (earnedScore > 0) {
            resultText.innerHTML = `**ë¶€ë¶„ ì ìˆ˜ íšë“!** (${earnedScore}/${totalScore}ì )`;
            resultText.className = 'result partial-correct';
            if (currentMode !== 'review') state.score += earnedScore;
            
            // ë¶€ë¶„ ì ìˆ˜ íšë“ ì‹œ ì˜¤ë‹µ ë…¸íŠ¸ ì¶”ê°€ (ë§Œì ì´ ì•„ë‹ˆë¯€ë¡œ)
            if (currentMode !== 'review' && !isAlreadyIncorrect(currentQuestion)) {
                masterEssayIncorrect.push(currentQuestion);
                updateReviewCount();
            } else if (currentMode === 'review') {
                // ì˜¤ë‹µ ë…¸íŠ¸ ëª¨ë“œì—ì„œ ë¶€ë¶„ ì ìˆ˜ë¥¼ íšë“í•´ë„ ë‹¤ìŒ í’€ì´ë¥¼ ìœ„í•´ ë‚¨ê²¨ë‘˜ì§€ ì—¬ë¶€ëŠ” ì‚¬ìš©ì ì •ì±…ì— ë”°ë¦„. (ë§Œì  ì•„ë‹ˆë©´ ë‚¨ê¹€)
                state.score += earnedScore; // ì˜¤ë‹µ ë…¸íŠ¸ ëª¨ë“œì—ì„œëŠ” íšë“ ì ìˆ˜ë§Œí¼ ëˆ„ì 
            }
        } else {
            resultText.innerHTML = `**ì˜¤ë‹µì…ë‹ˆë‹¤.** íšë“ ì ìˆ˜: (${earnedScore}/${totalScore}ì ) ğŸ˜¢`;
            resultText.className = 'result incorrect';
            
            if (currentMode !== 'review' && !isAlreadyIncorrect(currentQuestion)) {
                masterEssayIncorrect.push(currentQuestion);
                updateReviewCount();
            }
        }
        
        transitionToNextState(true);
    }

    // ì„œìˆ í˜• ìê°€ ì±„ì  ê²°ê³¼ ë°˜ì˜ - ê¸°ì¡´ ì„œìˆ í˜•
    function setEssayResult(isCorrect) {
        const state = quizState[currentMode];
        const resultText = document.getElementById('result-text');
        
        const currentQuestion = currentMode === 'review' 
            ? reviewShuffled[quizState.review.index] 
            : quizState[currentMode].shuffled[quizState[currentMode].index];

        if (isCorrect) {
            resultText.textContent = 'O (ë§ìŒ)ìœ¼ë¡œ ì±„ì ë˜ì—ˆìŠµë‹ˆë‹¤. ì˜í–ˆì–´ìš”!';
            resultText.classList.add('correct');
            // ì¼ë°˜ ì„œìˆ í˜•ì€ ë§ìœ¼ë©´ 1ì  íšë“
            if (currentMode !== 'review') state.score++;
            
            if (currentMode === 'review') {
                removeIncorrect(currentQuestion);
                state.score++;
            }
        } else {
            resultText.textContent = 'X (í‹€ë¦¼)ìœ¼ë¡œ ì±„ì ë˜ì—ˆìŠµë‹ˆë‹¤. ì •ë‹µì„ í™•ì¸í•˜ì„¸ìš”!';
            resultText.classList.add('incorrect');
            
            if (currentMode !== 'review' && !isAlreadyIncorrect(currentQuestion)) {
                essayIncorrect.push(currentQuestion);
                updateReviewCount();
            }
        }

        transitionToNextState(true);
    }
    
    // ë‹¤ìŒ ë¬¸ì œ ìƒíƒœë¡œ ì „í™˜
    function transitionToNextState(focusNext = false) {
        isAnswerChecked = true;
        document.getElementById('check-button').style.display = 'none';
        document.getElementById('next-button').style.display = 'inline-block';
        
        // ê¸°ì¡´ ì„œìˆ í˜•ì˜ ìê°€ ì±„ì  ë²„íŠ¼ ìˆ¨ê¹€
        const essayButtons = document.getElementById('essay-score-buttons');
        if (essayButtons) essayButtons.style.display = 'none';
        // ë§ˆìŠ¤í„° ì„œìˆ í˜• ê°€ì´ë“œë„ ìˆ¨ê¹€ (ì±„ì  ê²°ê³¼ê°€ ëŒ€ì‹  í‘œì‹œë˜ë¯€ë¡œ)
        document.getElementById('master-essay-guide').style.display = 'none';


        if (focusNext) {
            document.getElementById('next-button').focus();
        }
    }

    // ë‹¤ìŒ ë¬¸ì œë¡œ ì´ë™
    function nextQuestion() {
        if (!isAnswerChecked) return;
        quizState[currentMode].index++;
        loadQuestion();
    }
    
    // ì˜¤ë‹µ ë…¸íŠ¸ ì´ˆê¸°í™” ê¸°ëŠ¥
    function resetIncorrectAnswers() {
        if (shortIncorrect.length === 0 && essayIncorrect.length === 0 && masterEssayIncorrect.length === 0) {
            alert("ì˜¤ë‹µ ë…¸íŠ¸ê°€ ì´ë¯¸ ë¹„ì–´ìˆì–´!");
            return;
        }
        
        if (confirm("ì •ë§ë¡œ ì˜¤ë‹µ ë…¸íŠ¸ì— ì €ì¥ëœ ëª¨ë“  ë¬¸ì œë¥¼ ì´ˆê¸°í™”í•  ê±°ì•¼?")) {
            shortIncorrect = [];
            essayIncorrect = [];
            masterEssayIncorrect = [];
            reviewShuffled = [];
            updateReviewCount();
            alert("ì˜¤ë‹µ ë…¸íŠ¸ê°€ ê¹¨ë—í•˜ê²Œ ì´ˆê¸°í™”ë˜ì—ˆì–´!");
            
            if (currentMode === 'review') {
                setMode('short'); 
            }
        }
    }

    // ìµœì¢… ì ìˆ˜ í‘œì‹œ
    function showFinalScore() {
        const finalScoreDiv = document.getElementById('final-score');
        const state = quizState[currentMode];
        const totalQuestions = currentMode === 'review' ? state.total : state.shuffled.length;
        const quizType = 
            currentMode === 'short' ? 'ë‹¨ë‹µí˜•' : 
            (currentMode === 'essay' ? 'ì„œìˆ í˜•' : 
            (currentMode === 'master_essay' ? 'ë§ˆìŠ¤í„° ì„œìˆ í˜•' : 'ì˜¤ë‹µ ë…¸íŠ¸'));
        
        let scoreText;

        if (currentMode === 'review') {
             const remaining = reviewShuffled.length - state.index;
             scoreText = `ì´ ${totalQuestions} ë¬¸ì œ ì¤‘ ${state.score} ì ì„ íšë“í–ˆê³ , ì•„ì§ ${remaining} ë¬¸ì œê°€ ë‚¨ì•„ìˆì–´. (ì ìˆ˜ëŠ” ë‹¨ë‹µí˜•ì€ 1ì , ì„œìˆ í˜•/ë§ˆìŠ¤í„° ì„œìˆ í˜•ì€ íšë“ ì ìˆ˜ ê¸°ì¤€)`;
        } else {
             // ë‹¨ë‹µ/ì„œìˆ í˜•ì€ ë§ì€ ê°œìˆ˜ ê¸°ì¤€, ë§ˆìŠ¤í„° ì„œìˆ í˜•ì€ íšë“ ì ìˆ˜ ê¸°ì¤€
             const baseScore = currentMode === 'master_essay' ? state.score : state.score; 
             const scoreUnit = currentMode === 'master_essay' ? 'ì ' : 'ê°œ';
             const totalUnit = currentMode === 'master_essay' ? 'ì´ íšë“ ì ìˆ˜' : 'ë§ì¶˜ ë¬¸ì œ ê°œìˆ˜';

             scoreText = `${totalUnit}: <strong>${baseScore}${scoreUnit}</strong>`;
             if (currentMode !== 'master_essay') {
                 const percentage = ((state.score / totalQuestions) * 100).toFixed(1);
                 scoreText = `ì´ ${totalQuestions} ë¬¸ì œ ì¤‘ <strong>${state.score}${scoreUnit}</strong> ì •ë‹µ! ì •ë‹µë¥ : <strong>${percentage}%</strong>`;
             }
        }


        finalScoreDiv.innerHTML = `
            <h2>${quizType} í€´ì¦ˆ ì¢…ë£Œ!</h2>
            <p>${scoreText}</p>
            <button class="quiz-button" style="background-color: #4CAF50; color: #1a1a1a; margin-top: 20px;" onclick="startGame()">ìƒˆë¡œìš´ í€´ì¦ˆ ì‹œì‘í•˜ê¸° (ì„ê¸°)</button>
        `;
        document.getElementById('quiz-area').style.display = 'none';
        document.getElementById('control-panel').style.display = 'none';
        finalScoreDiv.style.display = 'block';
    }

    // --- í€´ì¦ˆ ì‹œì‘ (ë¬¸ì œ ì„ê¸°) ê¸°ëŠ¥ ê°œì„  ---
    function startGame() {
        initializeQuizData(); // ëª¨ë“  ë¬¸ì œ ë°°ì—´ì„ ìƒˆë¡œ ì„ìŒ
        
        // ìƒíƒœ ì´ˆê¸°í™”
        quizState.short.index = 0; quizState.short.score = 0;
        quizState.essay.index = 0; quizState.essay.score = 0;
        quizState.master_essay.index = 0; quizState.master_essay.score = 0; // ë§ˆìŠ¤í„° ì„œìˆ í˜• ì´ˆê¸°í™”
        quizState.review.index = 0; quizState.review.score = 0;
        
        let modeToStart = currentMode;
        if (currentMode === 'review' || document.getElementById('final-score').style.display === 'block') {
            modeToStart = 'short';
        }
        
        document.getElementById('tab-container').style.display = 'flex'; 
        document.getElementById('final-score').style.display = 'none';
        document.getElementById('quiz-area').style.display = 'block';
        document.getElementById('control-panel').style.display = 'flex'; 

        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        document.getElementById(`${modeToStart}-tab-btn`).classList.add('active');
        
        currentMode = modeToStart;
        loadQuestion();
    }

    // --- í‚¤ë³´ë“œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ---
    document.addEventListener('keydown', function(event) {
        if (document.getElementById('final-score').style.display === 'block') {
            return;
        }

        if (event.key === 'Enter') {
            event.preventDefault();

            if (document.activeElement.classList.contains('essay-score-btn')) {
                return;
            }
            
            // ë‹¤ì¤‘ ì…ë ¥ í•„ë“œì—ì„œ ë¹ˆ ì¹¸ì€ ì—”í„°ë¡œ ë‹¤ìŒ ì¹¸ìœ¼ë¡œ ë„˜ì–´ê°€ê²Œ í—ˆìš©
            if (document.activeElement.classList.contains('multi-answer-input')) {
                const currentInput = document.activeElement;
                let nextInput = currentInput.nextElementSibling;
                while (nextInput && nextInput.tagName !== 'INPUT') {
                    nextInput = nextInput.nextElementSibling;
                }
                
                if (!currentInput.value.trim() && nextInput && nextInput.classList.contains('multi-answer-input')) {
                    nextInput.focus();
                    return; 
                }
            }


            if (!isAnswerChecked) {
                handleCheck();
            } else {
                nextQuestion();
            }
        } else if (event.key === ' ' && isAnswerChecked) {
            event.preventDefault(); 
            nextQuestion();
        }
    });

    window.onload = startGame;
</script>

</body>
</html>
