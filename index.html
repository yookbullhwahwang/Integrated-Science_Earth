<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í†µí•©ê³¼í•™ í•™ìŠµì§€ ë§ˆìŠ¤í„° í€´ì¦ˆ</title>
    <style>
        /* ë‹¤í¬ ëª¨ë“œ ìŠ¤íƒ€ì¼ */
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background-color: #1a1a1a;
            color: #e0e0e0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }
        .container {
            width: 90%;
            max-width: 800px;
            background-color: #2c2c2c;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            text-align: center;
        }
        h1 {
            color: #8ab4f8;
            border-bottom: 2px solid #8ab4f8;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        #quiz-status {
            font-size: 1.2em;
            margin-bottom: 20px;
            color: #cccccc;
        }
        #question-box {
            min-height: 150px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            margin-bottom: 30px;
            background-color: #383838;
            border-radius: 10px;
        }
        #question-text {
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 20px;
            line-height: 1.5;
            text-align: left;
            width: 100%;
        }
        #answer-input {
            width: 80%;
            padding: 12px;
            font-size: 1.1em;
            border: 2px solid #555;
            border-radius: 8px;
            background-color: #444;
            color: #e0e0e0;
            text-align: center;
            outline: none;
            transition: border-color 0.3s;
        }
        #answer-input:focus {
            border-color: #8ab4f8;
        }
        /* ì„œìˆ í˜• ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
        .essay-input-container {
            width: 90%;
            margin: 10px auto;
        }
        .essay-input-container textarea {
            width: 100%;
            height: 100px;
            padding: 10px;
            font-size: 1em;
            border: 2px solid #555;
            border-radius: 8px;
            background-color: #444;
            color: #e0e0e0;
            resize: vertical;
            outline: none;
            box-sizing: border-box;
        }
        #essay-answer-box {
            background-color: #444;
            border: 1px solid #666;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            text-align: left;
            display: none;
        }
        #essay-answer-box h4 {
            color: #8ab4f8;
            margin-top: 0;
        }
        #essay-score-buttons {
            margin-top: 10px;
            text-align: center;
        }
        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .button-group {
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        .quiz-button {
            padding: 12px 25px;
            font-size: 1.1em;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s;
        }
        #check-button {
            background-color: #a8a8a8;
            color: #1a1a1a;
        }
        #check-button:hover:not(:disabled) {
            background-color: #cccccc;
        }
        #next-button {
            background-color: #8ab4f8;
            color: #1a1a1a;
            display: none;
        }
        #next-button:hover:not(:disabled) {
            background-color: #6a9ce7;
        }
        .essay-score-btn {
            padding: 8px 15px;
            font-size: 1em;
            margin: 0 5px;
        }
        .correct-btn {
            background-color: #85e085;
            color: #1a1a1a;
        }
        .incorrect-btn {
            background-color: #ff8a80;
            color: #1a1a1a;
        }
        .result {
            margin-top: 15px;
            font-size: 1.2em;
            font-weight: bold;
            min-height: 30px;
        }
        .correct {
            color: #85e085;
        }
        .incorrect {
            color: #ff8a80;
        }
        #final-score {
            margin-top: 40px;
            padding: 20px;
            border: 2px solid #8ab4f8;
            border-radius: 10px;
            font-size: 1.3em;
        }
        .quiz-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ“š í†µí•©ê³¼í•™ í•™ìŠµì§€ ë§ˆìŠ¤í„° í€´ì¦ˆ</h1>
    <div id="quiz-status"></div>

    <div id="quiz-area">
        <div id="question-box">
            <div id="question-text"></div>
            <input type="text" id="answer-input" placeholder="ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”" style="display: none;"/>
            <div class="essay-input-container" id="essay-input-area" style="display: none;">
                <textarea id="essay-user-answer" placeholder="ë‹µì•ˆì„ ì„œìˆ í•˜ì„¸ìš”."></textarea>
                <div id="essay-answer-box">
                    <h4>ğŸ“ ëª¨ë²” ë‹µì•ˆ</h4>
                    <pre id="essay-correct-answer" style="white-space: pre-wrap; font-family: inherit;"></pre>
                    <div id="essay-score-buttons">
                        <p>ìœ„ì˜ ëª¨ë²” ë‹µì•ˆê³¼ ë¹„êµí•˜ì—¬ ì±„ì í•´ì£¼ì„¸ìš”.</p>
                        <button class="quiz-button essay-score-btn correct-btn" onclick="setEssayResult(true)">O (ë§ìŒ)</button>
                        <button class="quiz-button essay-score-btn incorrect-btn" onclick="setEssayResult(false)">X (í‹€ë¦¼)</button>
                    </div>
                </div>
            </div>
            
            <div class="result" id="result-text"></div>
        </div>

        <div class="button-group">
            <button class="quiz-button" id="check-button" onclick="handleCheck()">Enterë¡œ ì •ë‹µ í™•ì¸</button>
            <button class="quiz-button" id="next-button" onclick="nextQuestion()" style="display: none;">Space/Enterë¡œ ë‹¤ìŒ ë¬¸ì œ</button>
        </div>
    </div>

    <div id="final-score" style="display: none;"></div>
</div>

<script>
    // --- í€´ì¦ˆ ë°ì´í„° ì •ì˜ (í•™ìŠµì§€ ì „ì²´ ë²”ìœ„ ë°˜ì˜) ---
    // type: 'short' (ë‹¨ë‹µí˜• ìë™ ì±„ì ) ë˜ëŠ” 'essay' (ì„œìˆ í˜• ìê°€ ì±„ì )
    const quizData = [
        // --- PAGE 1 & 2: ê³¼í•™ê¸°ìˆ ì˜ ë°œì „ê³¼ í•œê³„ ---
        { type: "short", q: "ê¸°ì¡´ ì „ë ¥ë§ì— ì •ë³´í†µì‹ ê¸°ìˆ ì„ ì ‘ëª©í•´ ì „ë ¥ ìƒì‚°, ì†¡ì „, ë°°ì „, ì†Œë¹„ ì „ ê³¼ì •ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ê³  ì œì–´í•˜ëŠ” ì°¨ì„¸ëŒ€ ì „ë ¥ë§ì€ ë¬´ì—‡ì¸ê°€ìš”?", a: "ìŠ¤ë§ˆíŠ¸ê·¸ë¦¬ë“œ" },
        { type: "short", q: "íœ´ëŒ€ ì „í™” ë° ì „ì ê¸°ê¸°ë¥¼ ì´ìš©í•˜ì—¬ ì‹œê°„ê³¼ ì¥ì†Œì— êµ¬ì• ë°›ì§€ ì•Šê³  ì •ë³´ë¥¼ ì‰½ê²Œ ì²˜ë¦¬í•˜ê³  ì˜ì‚¬ ì†Œí†µì´ ê°€ëŠ¥í•œ ê¸°ìˆ ì€ ë¬´ì—‡ì¸ê°€ìš”?", a: "ì •ë³´í†µì‹ ê¸°ìˆ " },
        { type: "short", q: "íƒœì–‘/í’ë ¥/ìˆ˜ë ¥ ë°œì „, íƒ„ì†Œ ë°°ì¶œ ê°ì†Œ, ì—ë„ˆì§€ ì €ì¥ ê¸°ìˆ  ë“±ì„ í†µí•´ ì§€ì† ê°€ëŠ¥í•œ ë°œì „ê³¼ ì§€êµ¬ í™˜ê²½ ë¬¸ì œ í•´ê²°ì— ë„ì›€ì„ ì£¼ëŠ” ê¸°ìˆ ì€ ë¬´ì—‡ì¸ê°€ìš”?", a: "ì‹ ì¬ìƒì—ë„ˆì§€ê¸°ìˆ " },
        { type: "short", q: "ë“œë¡ ì´ë‚˜ ì„¼ì„œë¥¼ ì´ìš©í•œ ì •ë°€ ë†ì—…, ìœ ì „ì ë³€í˜• ì‘ë¬¼, ìˆ˜ì§ ë†ì—… ë“± ì‹ëŸ‰ ë¬¸ì œ í•´ê²°ì— ê¸°ì—¬í•˜ëŠ” ê¸°ìˆ ì€ ë¬´ì—‡ì¸ê°€ìš”?", a: "ë†ì—…ê¸°ìˆ " },
        { type: "short", q: "MRI, CT, ì²¨ë‹¨ ì˜ìƒ ì§„ë‹¨, ì •ë°€ ì˜í•™, ì¬ìƒ ì˜í•™ ë“±ì„ í†µí•´ ì¸ê°„ì˜ ê±´ê°•í•œ ì‚¶ ìœ ì§€ì— ê¸°ì—¬í•˜ëŠ” ê¸°ìˆ ì€ ë¬´ì—‡ì¸ê°€ìš”?", a: "ì˜í•™ê¸°ìˆ " },
        { type: "short", q: "ì¸ê³µì§€ëŠ¥ ê¸°ìˆ ì„ í™œìš©í•´ ìƒí™©ì„ ìŠ¤ìŠ¤ë¡œ íŒë‹¨í•˜ë©° ììœ¨ì ìœ¼ë¡œ ì›€ì§ì´ëŠ” ë¡œë´‡ì€ ë¬´ì—‡ì¸ê°€ìš”?", a: "ì¸ê³µì§€ëŠ¥ë¡œë´‡" },
        { type: "essay", q: "ì¸ê³µì§€ëŠ¥ ë¡œë´‡ì˜ í™œìš© ì˜ˆì‹œ ì¤‘, ê³µì¥ì—ì„œì˜ í™œìš©ê³¼ ê·¸ íš¨ê³¼ë¥¼ ì„œìˆ í•˜ì‹œì˜¤.", a: "ê³µì¥ì—ì„œ ë°˜ë³µì ì´ê³  ìœ„í—˜í•œ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ìƒì‚° íš¨ìœ¨ì„±ì´ í–¥ìƒë˜ê³ , ìœ„í—˜í•œ ì¼ì— ì‹¤ì‹œê°„ìœ¼ë¡œ ì ì ˆí•˜ê²Œ ëŒ€ì²˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤." },
        { type: "short", q: "ì‚¬ë¬¼ì— ì„¼ì„œì™€ í†µì‹  ê¸°ìˆ ì„ ë‚´ì¥í•˜ê³  ì¸í„°ë„·ì— ì—°ê²°í•˜ì—¬ ì •ë³´ë¥¼ ì „ì†¡í•˜ê³  í†µì‹ í•˜ëŠ” ê¸°ìˆ  (ì•½ì í¬í•¨)ì€ ë¬´ì—‡ì¸ê°€ìš”?", a: "ì‚¬ë¬¼ì¸í„°ë„·(IoT)" },
        { type: "short", q: "ì¡°ëª…, ëƒ‰ë‚œë°©, ë³´ì•ˆì‹œìŠ¤í…œ ë“±ì„ ìŠ¤ë§ˆíŠ¸ ê¸°ê¸°ë¡œ ì œì–´í•˜ëŠ” ì‚¬ë¬¼ ì¸í„°ë„· í™œìš© ì˜ˆëŠ” ë¬´ì—‡ì¸ê°€ìš”?", a: "í™ˆìë™í™”" },
        { type: "short", q: "ì‹¤ì‹œê°„ êµí†µ ì •ë³´ë¥¼ ë¶„ì„, ì¡°ì •í•˜ì—¬ êµí†µí˜¼ì¡ì„ ê°ì†Œì‹œí‚¤ëŠ” ì‚¬ë¬¼ ì¸í„°ë„· í™œìš© ì˜ˆëŠ” ë¬´ì—‡ì¸ê°€ìš”?", a: "ìŠ¤ë§ˆíŠ¸êµí†µì‹œìŠ¤í…œ" },
        { type: "short", q: "í™˜ìì˜ ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ìˆ˜ì§‘, ë¶„ì„í•˜ì—¬ íš¨ìœ¨ì ì¸ ì§„ë£Œë¥¼ ì œê³µí•˜ëŠ” ì‚¬ë¬¼ ì¸í„°ë„· í™œìš© ì˜ˆëŠ” ë¬´ì—‡ì¸ê°€ìš”?", a: "ìŠ¤ë§ˆíŠ¸ë³‘ì›" },
        { type: "short", q: "ìƒì‚° ê³µì •ì˜ ìë™í™”ë¡œ ìƒì‚°ì„±ì„ í–¥ìƒí•˜ê³ , ë¹„ìš©ì„ ì ˆê°í•˜ë©°, í’ˆì§ˆ ê´€ë¦¬ë¥¼ ê°•í™”í•˜ëŠ” ì‚¬ë¬¼ ì¸í„°ë„· í™œìš© ì˜ˆëŠ” ë¬´ì—‡ì¸ê°€ìš”?", a: "ìŠ¤ë§ˆíŠ¸ê³µì¥" },
        { type: "short", q: "í† ì–‘ ìˆ˜ë¶„, ê¸°í›„ ì¡°ê±´, ì‘ë¬¼ ì„±ì¥ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ì—¬ ë†ì‘ë¬¼ ìƒì‚°ì„± í–¥ìƒì‹œí‚¤ëŠ” ì‚¬ë¬¼ ì¸í„°ë„· í™œìš© ì˜ˆëŠ” ë¬´ì—‡ì¸ê°€ìš”?", a: "ìŠ¤ë§ˆíŠ¸ë†ì—…" },
        { type: "essay", q: "ìŠ¤ë§ˆíŠ¸íŒœ(ë†ì—…)ì—ì„œ ì‚¬ë¬¼ ì¸í„°ë„· ê¸°ìˆ ì´ ì ìš©ë˜ëŠ” êµ¬ì²´ì ì¸ ì˜ˆì‹œ 3ê°€ì§€ë¥¼ í•™ìŠµì§€ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ì„œìˆ í•˜ì‹œì˜¤.", a: "1. í† ì–‘ ì„¼ì„œë¥¼ ì´ìš©í•˜ì—¬ ìˆ˜ë¶„ëŸ‰, pH ë†ë„, ì˜¨ë„ ë“±ì„ ì¸¡ì •í•˜ê³ , ê¸°ìƒ ì„¼ì„œëŠ” ì˜¨ë„, ìŠµë„, ì¼ì‚¬ëŸ‰, ê°•ìš° ë“±ì„ ëª¨ë‹ˆí„°ë§ í•¨.\n2. ìë™ ê´€ê°œ ì‹œìŠ¤í…œì„ ì´ìš©í•˜ì—¬ í•„ìš”í•œ ì–‘ì˜ ìˆ˜ë¶„ì„ ê³µê¸‰í•¨.\n3. ì‘ë¬¼ì˜ ì˜ì–‘ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³  í•„ìš”í•œ ë¹„ë£Œì™€ ì˜ì–‘ì†Œë¥¼ ê³µê¸‰í•¨." },
        { type: "essay", q: "ë°”ë¦¬ìŠ¤íƒ€ ë¡œë´‡ì˜ ì¥ì  5ê°€ì§€ë¥¼ ëª¨ë‘ ì„œìˆ í•˜ì‹œì˜¤.", a: "1. ì¼ê´€ëœ í’ˆì§ˆ, ê· ì¼í•œ ë§›.\n2. íš¨ìœ¨ì„±, ì¸ê°„ë³´ë‹¤ ë¹ ë¦„.\n3. ë¹„ìš© ì ˆê°, ì‰¬ì§€ ì•Šê³  ì¼í•¨.\n4. ìœ„ìƒ, ìœ„ìƒì  í™˜ê²½ ê´€ë¦¬.\n5. ë‹¤ì–‘ì„±, ë‹¤ì–‘í•œ ë©”ë‰´ ê°€ëŠ¥." },
        { type: "essay", q: "ë°”ë¦¬ìŠ¤íƒ€ ë¡œë´‡ì˜ ë‹¨ì  4ê°€ì§€ì™€ ì´ì— ëŒ€í•œ ê°œì„  ë°©ì•ˆ 3ê°€ì§€ ì´ìƒì„ ì„œìˆ í•˜ì‹œì˜¤.", a: "ë‹¨ì : ì´ˆê¸°ë¹„ìš©ì´ ë¹„ìŒˆ, í”„ë¡œê·¸ë¨ëœ ê²ƒë§Œ ë§Œë“¬, ê³ ì¥ì´ë‚˜ ì˜¤ë¥˜ ë°œìƒ ê°€ëŠ¥, ê°ê³¼ ìƒí˜¸ ì‘ìš©ì´ ì—†ìŒ.\nê°œì„  ë°©ì•ˆ: ìŒì„± ì¸ì‹ í”„ë¡œê·¸ë¨ ì¶”ê°€ (ê³ ê°ê³¼ ì˜ì‚¬ ì†Œí†µ), ì»¤í”¼ ì™¸ì—ë„ ë‹¤ì–‘í•œ ìŒë£Œ ì œê³µ, ì‚¬ëŒê³¼ ë¹„ìŠ·í•˜ê²Œ íŒ”ê³¼ ì–¼êµ´ì„ ë§Œë“¤ì–´ ê°„ë‹¨í•œ í‘œì •ì„ ì§€ì„ ìˆ˜ ìˆë„ë¡ í•¨, ë¡œë´‡ ìš´ì˜ì„ ìœ„í•œ ì „ë¬¸ ì¸ë ¥ í•„ìš”." },
        { type: "essay", q: "ì¸ê³µì§€ëŠ¥ ê¸°ìˆ  ë°œì „ì˜ í•œê³„ 6ê°€ì§€ì™€ ì •ë³´ í†µì‹  ê¸°ìˆ  ë°œì „ì˜ í•œê³„ 4ê°€ì§€ë¥¼ ê°ê° ì„œìˆ í•˜ì‹œì˜¤.", a: "ì¸ê³µì§€ëŠ¥ ê¸°ìˆ ì˜ í•œê³„: 1. í”„ë¼ì´ë²„ì‹œ ì¹¨í•´, 2. í¸ê²¬ê³¼ ì°¨ë³„, 3. ì¼ìë¦¬ ê°ì†Œ, 4. ë””ì§€í„¸ ê²©ì°¨ ë°œìƒ, 5. í•´í‚¹ ë“± ì‚¬ì´ë²„ ë³´ì•ˆ ìœ„í—˜, 6. ì¸ê³µì§€ëŠ¥ì˜ ì˜¤ë‚¨ìš©.\nì •ë³´ í†µì‹  ê¸°ìˆ ì˜ í•œê³„: 1. ì •ë³´ ê³¼ë¶€í•˜, 2. ì¸í„°ë„· ì¤‘ë…, 3. ê°ì‹œ ì‚¬íšŒ, 4. ìœ¤ë¦¬ì  ê°ˆë“±." },
        { type: "short", q: "ë§¤ì²´ ê¸°ìˆ  ë°œì „ì˜ í•œê³„ë¡œ ë‚˜íƒ€ë‚˜ëŠ” ë¬¸ì œ ì¤‘, ê±°ì§“ ì •ë³´ë‚˜ ì˜ëª»ëœ ì •ë³´ê°€ í¼ì§€ëŠ” ê²ƒì„ ì¼ì»«ëŠ” ë§ì€ ë¬´ì—‡ì¸ê°€ìš”?", a: "ê°€ì§œë‰´ìŠ¤" },

        // --- PAGE 3: ê³¼í•™ ê´€ë ¨ ì‚¬íšŒì  ìŸì  (SSI) ---
        { type: "short", q: "ê³¼í•™ê¸°ìˆ ì˜ ë°œì „ìœ¼ë¡œ ë‚˜íƒ€ë‚˜ ë‹¤ì–‘í•œ ì‚¬íšŒ êµ¬ì„±ì›ë“¤ì—ê²Œ ë…¼ë€ì„ ì¼ìœ¼í‚¤ëŠ” ë¬¸ì œë¥¼ ë¬´ì—‡ì´ë¼ê³  í•˜ë©°, ì•½ìëŠ” ë¬´ì—‡ì¸ê°€ìš”?", a: "ê³¼í•™ê´€ë ¨ì‚¬íšŒì ìŸì (SSI)" },
        { type: "short", q: "'Not In My Back Yard'ì˜ ì•½ìë¡œ, í˜ì˜¤ ì‹œì„¤ ë“±ì´ ìì‹ ì˜ ê±°ì£¼ ì§€ì—­ì— ë“¤ì–´ì˜¤ëŠ” ê²ƒì„ ë°˜ëŒ€í•˜ëŠ” í˜„ìƒì€?", a: "NIMBY" },
        { type: "short", q: "'Please In My Front Yard'ì˜ ì•½ìë¡œ, ì´ìµì´ ë˜ëŠ” ì‹œì„¤ì„ ìê¸° ê±°ì£¼ ì§€ì—­ì— ìœ ì¹˜í•˜ë ¤ëŠ” í˜„ìƒì€?", a: "PIMFY" },
        { type: "essay", q: "ì˜¤ë˜ëœ í•µ ë°œì „ì†Œì˜ ê°€ë™ ì¤‘ë‹¨ì— ëŒ€í•œ 'ì°¬ì„±' ì…ì¥ê³¼ 'ë°˜ëŒ€' ì…ì¥ì˜ ì£¼ëœ ê·¼ê±°ë¥¼ ê°ê° ì„œìˆ í•˜ì‹œì˜¤.", a: "ì°¬ì„±: ê°€ë™ ì—°í•œì„ ë„˜ì–´ì„œ ê°€ë™í•˜ëŠ” ê²ƒì€ ìœ„í—˜í•˜ë‹¤.\në°˜ëŒ€: í•µ ë°œì „ìœ¼ë¡œ ì „ê¸° ì—ë„ˆì§€ë¥¼ ì €ë ´í•˜ê²Œ ìƒì‚°í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë°”ë¡œ ì¤‘ë‹¨í•˜ë©´ ê²½ì œì  ì†ì‹¤ì´ í¬ë‹¤." },
        { type: "essay", q: "ìœ ì „ì ë³€í˜• ìƒë¬¼ì˜ ì¬ë°°ì— ëŒ€í•œ 'ì°¬ì„±' ì…ì¥ê³¼ 'ë°˜ëŒ€' ì…ì¥ì˜ ì£¼ëœ ê·¼ê±°ë¥¼ ê°ê° ì„œìˆ í•˜ì‹œì˜¤.", a: "ì°¬ì„±: ìœ ì „ì ë³€í˜• ìƒë¬¼ì€ ì§ˆë³‘ì—ë„ ê°•í•˜ê³  ìˆ˜í™•ëŸ‰ë„ ë§ì•„ ì¸ë¥˜ì˜ ì‹ëŸ‰ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.\në°˜ëŒ€: ìœ ì „ì ë³€í˜• ìƒë¬¼ì´ ì¸ê°„ì—ê²Œ ì–´ë–¤ ì˜í–¥ì„ ë¯¸ì¹˜ëŠ”ì§€ êµ¬ì²´ì ìœ¼ë¡œ ì—°êµ¬ë˜ì–´ ìˆì§€ ì•Šìœ¼ë¯€ë¡œ ì¬ë°°ë¥¼ ì œí•œí•´ì•¼ í•œë‹¤." },
        { type: "essay", q: "ì‹ ì¬ìƒ ì—ë„ˆì§€ í™œìš© í™•ëŒ€ì— ëŒ€í•œ 'ì°¬ì„±' ì…ì¥ê³¼ 'ë°˜ëŒ€' ì…ì¥ì˜ ì£¼ëœ ê·¼ê±°ë¥¼ ê°ê° ì„œìˆ í•˜ì‹œì˜¤.", a: "ì°¬ì„±: ì‹ ì¬ìƒ ì—ë„ˆì§€ í™œìš©ì„ í™•ëŒ€í•˜ë©´ í™˜ê²½ ì˜¤ì—¼ ë¬¼ì§ˆì˜ ë°°ì¶œì´ ì¤„ì–´ ì§€êµ¬ í™˜ê²½ì„ ë³´í˜¸í•  ìˆ˜ ìˆë‹¤.\në°˜ëŒ€: ì´ˆê¸° ë¹„ìš©ì´ ë§ì´ ë“¤ê³ , ë°œì „ ê³¼ì •ì—ì„œ ì£¼ë³€ í™˜ê²½ì˜ ì˜í–¥ì„ ë°›ì•„ ì•ˆì •ì ìœ¼ë¡œ ì „ê¸°ë¥¼ ìƒì‚°í•˜ê¸° ì–´ë ¤ìš°ë¯€ë¡œ ì£¼ë ¥ ì—ë„ˆì§€ì›ìœ¼ë¡œ ì í•©í•˜ì§€ ì•Šë‹¤." },
        { type: "essay", q: "ë™ë¬¼ ì‹¤í—˜ì— ëŒ€í•œ 'ì°¬ì„±' ì…ì¥ê³¼ 'ë°˜ëŒ€' ì…ì¥ì˜ ì£¼ëœ ê·¼ê±°ë¥¼ ê°ê° ì„œìˆ í•˜ì‹œì˜¤.", a: "ì°¬ì„±: ì˜ì•½í’ˆ, í™”ì¥í’ˆ ë“±ì„ ìƒì‚°í•  ë•Œ ì¸ê°„ì´ ì§ì ‘ ì‹¤í—˜ ëŒ€ìƒì´ ë  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ë™ë¬¼ ì‹¤í—˜ì€ ë°˜ë“œì‹œ í•„ìš”í•˜ë‹¤.\në°˜ëŒ€: ì•ˆì •ì„±ì„ ì¶©ë¶„íˆ í™•ë³´í•´ ë¶ˆí•„ìš”í•œ ë™ë¬¼ ì‹¤í—˜ì„ ì¤„ì—¬ì•¼ í•œë‹¤." },
        { type: "essay", q: "ê³¼í•™ ê´€ë ¨ ì‚¬íšŒì  ìŸì ì— ëŒ€í•œ 'í•©ë¦¬ì  ì˜ì‚¬ ê²°ì •'ì„ ìœ„í•´ í•„ìš”í•œ ê³¼ì •ì„ ì„œìˆ í•˜ì‹œì˜¤.", a: "ë‹¤ì–‘í•œ ê´€ì ê³¼ ë³µì¡í•œ ìƒí™©ì„ ê³¼í•™ì ìœ¼ë¡œ ì´í•´í•˜ê³ , ì¶©ë¶„í•œ í† ë¡ ì„ ê±°ì³ í•©ë¦¬ì ìœ¼ë¡œ ì˜ì‚¬ ê²°ì •ì„ ë‚´ë¦´ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤." },

        // --- PAGE 4: ê³¼í•™ ìœ¤ë¦¬ ---
        { type: "short", q: "ê³¼í•™ê¸°ìˆ ì„ ì—°êµ¬í•˜ê³ , ì´ìš©í•  ë•Œ ìœ¤ë¦¬ì  ì¸¡ë©´ì„ ê³ ë ¤í•´ ê°€ì¹˜ íŒë‹¨ í•˜ëŠ” ê²ƒì„ ë¬´ì—‡ì´ë¼ê³  í•˜ëŠ”ê°€?", a: "ê³¼í•™ìœ¤ë¦¬" },
        { type: "essay", q: "ê³¼í•™ê¸°ìˆ ì´ ë°”ëŒì§í•˜ê²Œ ë°œì „í•˜ê¸° ìœ„í•´ ê³¼í•™ ìœ¤ë¦¬ë¥¼ ì§€ì¼œì•¼ í•˜ëŠ” ì´ìœ ë¥¼ ì„œìˆ í•˜ì‹œì˜¤.", a: "ê³¼í•™ ê¸°ìˆ ì˜ ë°œì „ì´ ê°€ì ¸ì˜¬ ê³¼í•™ ê´€ë ¨ ì‚¬íšŒì  ìŸì ì„ ì˜ˆì¸¡í•˜ê¸° ì–´ë µê¸° ë•Œë¬¸ì—, ìœ¤ë¦¬ì  íƒœë„ë¥¼ ê°–ì¶”ì–´ ê³¼í•™ ê¸°ìˆ ì´ ê¸ì •ì ìœ¼ë¡œ ë°œì „í•  ìˆ˜ ìˆë„ë¡ ë…¸ë ¥í•´ì•¼ í•œë‹¤." },
        { type: "short", q: "ì—°êµ¬ ì ˆì°¨ì™€ ê²°ê³¼ë¥¼ ì¡°ì‘í•˜ê±°ë‚˜ ê±°ì§“ìœ¼ë¡œ ë§Œë“¤ì–´ ë‚´ì§€ ì•Šê³ , í•™ë¬¸ ë°œì „ì„ ìœ„í•´ ì—°êµ¬ ë‚´ìš©ì„ ê³µê°œí•˜ëŠ” ì—°êµ¬ ìœ¤ë¦¬ í•­ëª©ì€?", a: "ì •ì§ì„±ê³¼ê°œë°©ì„±" },
        { type: "short", q: "ë‹¤ë¥¸ ê³¼í•™ìì˜ ì—°êµ¬ ê²°ê³¼ë¥¼ í•¨ë¶€ë¡œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì—°êµ¬ ìœ¤ë¦¬ í•­ëª©ì€?", a: "ì§€ì‹ì¬ì‚°ê¶Œì¡´ì¤‘" },
        { type: "short", q: "ì‹¤í—˜ ëŒ€ìƒì„ ìœ¤ë¦¬ì ìœ¼ë¡œ ëŒ€í•˜ì—¬ ì‹¤í—˜ ëŒ€ìƒì˜ ìƒëª…ê³¼ ì¡´ì—„ì„±ì„ ì¡´ì¤‘í•˜ëŠ” ì—°êµ¬ ìœ¤ë¦¬ í•­ëª©ì€?", a: "ì‹¤í—˜ëŒ€ìƒì—ëŒ€í•œì¡´ì¤‘" },
        { type: "short", q: "ì‚¬íšŒì— ì•…ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ì—°êµ¬ëŠ” í”¼í•˜ê³ , ê³µê³µì˜ ì´ìµì„ ìœ„í•´ ë…¸ë ¥í•˜ëŠ” ì—°êµ¬ ìœ¤ë¦¬ í•­ëª©ì€?", a: "ì‚¬íšŒì ì±…ì„" },
        { type: "short", q: "ì•ˆë½ì‚¬, ë™ë¬¼ ì‹¤í—˜, ë°°ì•„ ì—°êµ¬, ë§ì¶¤ ì•„ê¸° ë“±ê³¼ ê´€ë ¨ëœ ê³¼í•™ ìœ¤ë¦¬ì˜ êµ¬ë¶„ ë¶„ì•¼ëŠ”?", a: "ìƒëª…ìœ¤ë¦¬" },
        { type: "short", q: "ìœ ì „ì ì¬ì¡°í•©, ì¤„ê¸°ì„¸í¬ ì—°êµ¬, ì¸ê°„ ë³µì œ ë“±ê³¼ ê´€ë ¨ëœ ê³¼í•™ ìœ¤ë¦¬ì˜ êµ¬ë¶„ ë¶„ì•¼ëŠ”?", a: "ìœ ì „ê³µí•™" },
        { type: "short", q: "í•µë°œì „, ë°©ì‚¬ì„± íê¸°ë¬¼, í•´ì–‘ ìì›ì˜ ì´ìš© ë“±ê³¼ ê´€ë ¨ëœ ê³¼í•™ ìœ¤ë¦¬ì˜ êµ¬ë¶„ ë¶„ì•¼ëŠ”?", a: "ì—ë„ˆì§€" },
        { type: "short", q: "ê¸°í›„ ë³€í™”, ë¯¸ì„¸ ë¨¼ì§€, ìƒë¬¼ì¢… ê°ì†Œ ë“±ê³¼ ê´€ë ¨ëœ ê³¼í•™ ìœ¤ë¦¬ì˜ êµ¬ë¶„ ë¶„ì•¼ëŠ”?", a: "í™˜ê²½,ìƒíƒœê³„" },
        { type: "short", q: "ë‚˜ë…¸ ê¸°ìˆ , ë¡œë´‡, ì‹ëŸ‰ ìì›, ìš°ì£¼ í•­í•´, ë“œë¡  ì‚¬ìš© ë²”ìœ„ ë“±ê³¼ ê´€ë ¨ëœ ê³¼í•™ ìœ¤ë¦¬ì˜ êµ¬ë¶„ ë¶„ì•¼ëŠ”?", a: "ê¸°ìˆ ê³µí•™" },
    ];

    let shuffledQuiz = [];
    let currentQuestionIndex = 0;
    let score = 0;
    let isAnswerChecked = false;

    // Fisher-Yates ì…”í”Œ ì•Œê³ ë¦¬ì¦˜
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function startGame() {
        // ë¬¸ì œ ì…”í”Œ
        shuffledQuiz = shuffleArray([...quizData]);
        currentQuestionIndex = 0;
        score = 0;
        document.getElementById('final-score').style.display = 'none';
        document.getElementById('quiz-area').style.display = 'block';
        loadQuestion();
    }

    function loadQuestion() {
        if (currentQuestionIndex >= shuffledQuiz.length) {
            showFinalScore();
            return;
        }

        const currentQuestion = shuffledQuiz[currentQuestionIndex];
        
        // ìƒíƒœ ì—…ë°ì´íŠ¸
        document.getElementById('quiz-status').textContent = `ë¬¸ì œ ${currentQuestionIndex + 1} / ${shuffledQuiz.length} (í˜„ì¬ ì ìˆ˜: ${score}ì )`;
        
        // ë¬¸ì œ ë‚´ìš© ì—…ë°ì´íŠ¸
        document.getElementById('question-text').textContent = currentQuestion.q;
        
        // ì…ë ¥/ê²°ê³¼ ì´ˆê¸°í™”
        document.getElementById('result-text').textContent = '';
        document.getElementById('result-text').className = 'result';
        document.getElementById('answer-input').value = '';
        document.getElementById('essay-user-answer').value = '';
        document.getElementById('essay-answer-box').style.display = 'none';

        // ë¬¸ì œ ìœ í˜•ì— ë”°ë¼ ì…ë ¥ í•„ë“œ í† ê¸€
        if (currentQuestion.type === 'short') {
            document.getElementById('answer-input').style.display = 'block';
            document.getElementById('essay-input-area').style.display = 'none';
            document.getElementById('answer-input').focus();
        } else { // essay
            document.getElementById('answer-input').style.display = 'none';
            document.getElementById('essay-input-area').style.display = 'block';
            document.getElementById('essay-user-answer').focus();
        }

        // ë²„íŠ¼ ë° ìƒíƒœ ì´ˆê¸°í™”
        document.getElementById('check-button').style.display = 'inline-block';
        document.getElementById('check-button').disabled = false; // ì„œìˆ í˜• ë²„íŠ¼ ë‹¤ì‹œ í™œì„±í™”
        document.getElementById('next-button').style.display = 'none';
        document.getElementById('answer-input').disabled = false;
        document.getElementById('essay-user-answer').disabled = false;
        
        // ì„œìˆ í˜• ë²„íŠ¼ ìˆ¨ê²¨ì§„ ìƒíƒœ ë³µì›
        const essayButtons = document.getElementById('essay-score-buttons');
        if (essayButtons) essayButtons.style.display = 'block'; 

        isAnswerChecked = false;
    }

    // ì •ë‹µ í™•ì¸ ë²„íŠ¼ ì²˜ë¦¬
    function handleCheck() {
        if (isAnswerChecked) return;

        const currentQuestion = shuffledQuiz[currentQuestionIndex];

        if (currentQuestion.type === 'short') {
            checkShortAnswer();
        } else { // essay
            showEssayAnswer();
        }
    }

    // ë‹¨ë‹µí˜• ìë™ ì±„ì 
    function checkShortAnswer() {
        const currentQuestion = shuffledQuiz[currentQuestionIndex];
        const userAnswer = document.getElementById('answer-input').value.replace(/\s/g, '').toLowerCase();
        const correctAnswer = currentQuestion.a.replace(/\s/g, '').toLowerCase();
        const resultText = document.getElementById('result-text');
        
        if (userAnswer === correctAnswer) {
            resultText.textContent = 'âœ… ì •ë‹µì…ë‹ˆë‹¤!';
            resultText.classList.add('correct');
            score++;
        } else {
            resultText.textContent = `âŒ ì˜¤ë‹µì…ë‹ˆë‹¤! ì •ë‹µ: ${currentQuestion.a}`;
            resultText.classList.add('incorrect');
        }
        
        // ì±„ì  í›„ ìƒíƒœ ë³€ê²½
        document.getElementById('answer-input').disabled = true;
        transitionToNextState(true);
    }

    // ì„œìˆ í˜• ëª¨ë²” ë‹µì•ˆ í‘œì‹œ (ìê°€ ì±„ì  ì‹œì‘)
    function showEssayAnswer() {
        const currentQuestion = shuffledQuiz[currentQuestionIndex];
        document.getElementById('essay-user-answer').disabled = true;
        
        const answerBox = document.getElementById('essay-answer-box');
        document.getElementById('essay-correct-answer').textContent = currentQuestion.a; // ëª¨ë²” ë‹µì•ˆ í‘œì‹œ (pre-wrapìœ¼ë¡œ ì¤„ë°”ê¿ˆ ìœ ì§€)
        answerBox.style.display = 'block';

        const resultText = document.getElementById('result-text');
        resultText.textContent = 'ğŸ‘† ëª¨ë²” ë‹µì•ˆê³¼ ë¹„êµ í›„ ì •ë‹µ ì—¬ë¶€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.';
        resultText.className = 'result';

        // ì •ë‹µ í™•ì¸ ë²„íŠ¼ ë¹„í™œì„±í™” (ìê°€ ì±„ì  ë²„íŠ¼ìœ¼ë¡œ ì „í™˜)
        document.getElementById('check-button').disabled = true;
    }

    // ì„œìˆ í˜• ìê°€ ì±„ì  ê²°ê³¼ ë°˜ì˜
    function setEssayResult(isCorrect) {
        const resultText = document.getElementById('result-text');

        if (isCorrect) {
            resultText.textContent = 'O (ë§ìŒ)ìœ¼ë¡œ ì±„ì ë˜ì—ˆìŠµë‹ˆë‹¤. ì˜í–ˆì–´ìš”!';
            resultText.classList.add('correct');
            score++;
        } else {
            resultText.textContent = 'X (í‹€ë¦¼)ìœ¼ë¡œ ì±„ì ë˜ì—ˆìŠµë‹ˆë‹¤. ì •ë‹µì„ í™•ì¸í•˜ì„¸ìš”!';
            resultText.classList.add('incorrect');
        }

        transitionToNextState(true);
    }

    // ë‹¤ìŒ ë¬¸ì œë¡œ ë„˜ì–´ê°ˆ ìˆ˜ ìˆëŠ” ìƒíƒœë¡œ ì „í™˜
    function transitionToNextState(focusNext = false) {
        isAnswerChecked = true;
        document.getElementById('check-button').style.display = 'none';
        document.getElementById('next-button').style.display = 'inline-block';
        
        // ì„œìˆ í˜•ì¼ ê²½ìš° ìê°€ ì±„ì  ë²„íŠ¼ ë¹„í™œì„±í™”
        if (shuffledQuiz[currentQuestionIndex].type === 'essay') {
            const essayButtons = document.getElementById('essay-score-buttons');
            if (essayButtons) essayButtons.style.display = 'none';
        }

        if (focusNext) {
            document.getElementById('next-button').focus();
        }
    }


    function nextQuestion() {
        if (!isAnswerChecked) return;
        currentQuestionIndex++;
        loadQuestion();
    }

    function showFinalScore() {
        const finalScoreDiv = document.getElementById('final-score');
        const totalQuestions = shuffledQuiz.length;
        const percentage = ((score / totalQuestions) * 100).toFixed(1);

        finalScoreDiv.innerHTML = `
            <h2>ğŸ‰ í€´ì¦ˆ ì¢…ë£Œ ğŸ‰</h2>
            <p>ì´ ${totalQuestions} ë¬¸ì œ ì¤‘ <strong>${score}ë¬¸ì œ</strong> ì •ë‹µ!</p>
            <p>ì •ë‹µë¥ : <strong>${percentage}%</strong></p>
            <button class="quiz-button" style="background-color: #4CAF50; color: #1a1a1a; margin-top: 20px;" onclick="startGame()">ë‹¤ì‹œ ì‹œì‘í•˜ê¸°</button>
        `;
        document.getElementById('quiz-area').style.display = 'none';
        finalScoreDiv.style.display = 'block';
    }

    // --- í‚¤ë³´ë“œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ---
    document.addEventListener('keydown', function(event) {
        if (document.getElementById('final-score').style.display === 'block') {
            return;
        }

        if (event.key === 'Enter') {
            event.preventDefault();

            if (!isAnswerChecked) {
                // ì •ë‹µ í™•ì¸ ì „: Enter -> handleCheck (ë‹¨ë‹µí˜• ì±„ì  ë˜ëŠ” ì„œìˆ í˜• ëª¨ë²” ë‹µì•ˆ í‘œì‹œ)
                handleCheck();
            } else {
                // ì •ë‹µ í™•ì¸ í›„: Enter -> nextQuestion
                nextQuestion();
            }
        } else if (event.key === ' ' && isAnswerChecked) {
            // ì •ë‹µ í™•ì¸ í›„: Spacebar -> nextQuestion
            event.preventDefault(); 
            nextQuestion();
        }
    });

    // í€´ì¦ˆ ì‹œì‘
    window.onload = startGame;
</script>

</body>
</html>
